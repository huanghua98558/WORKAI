# WorkTool AI å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•æ–‡æ¡£

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ Playwright è¿›è¡Œå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œè¦†ç›–æ‰€æœ‰ä¸»è¦é¡µé¢å’Œäº¤äº’åŠŸèƒ½ã€‚

### æµ‹è¯•èŒƒå›´

- âœ… é¦–é¡µæ‰€æœ‰æ ‡ç­¾é¡µ
- âœ… æœºå™¨äººç®¡ç†
- âœ… ä¼šè¯ç®¡ç†
- âœ… AIæ¨¡å—
- âœ… æµç¨‹å¼•æ“
- âœ… ç›‘æ§å‘Šè­¦
- âœ… ç³»ç»Ÿè®¾ç½®
- âœ… ä»ªè¡¨ç›˜
- âœ… ååŒåˆ†æ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pnpm install
```

### 2. å®‰è£… Playwright æµè§ˆå™¨

```bash
npx playwright install --with-deps
```

### 3. è¿è¡Œæµ‹è¯•

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨æµ‹è¯•è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
chmod +x test-frontend.sh
./test-frontend.sh
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨ Playwright å‘½ä»¤

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npx playwright test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npx playwright test tests/e2e/home-tabs.spec.ts

# è¿è¡Œç‰¹å®šæµ‹è¯•ç”¨ä¾‹
npx playwright test -g "é¦–é¡µåŠ è½½æµ‹è¯•"

# æ˜¾ç¤ºæµ‹è¯•æŠ¥å‘Š
npx playwright show-report

# è°ƒè¯•æ¨¡å¼
npx playwright test --debug
```

## ğŸ“Š æµ‹è¯•æ–‡ä»¶è¯´æ˜

### æµ‹è¯•æ–‡ä»¶åˆ—è¡¨

| æ–‡ä»¶ | è¯´æ˜ | æµ‹è¯•ç”¨ä¾‹æ•° |
|------|------|-----------|
| `tests/e2e/home-tabs.spec.ts` | é¦–é¡µæ ‡ç­¾é¡µæµ‹è¯• | 10 |
| `tests/e2e/robot-management.spec.ts` | æœºå™¨äººç®¡ç†æµ‹è¯• | 8 |
| `tests/e2e/session-management.spec.ts` | ä¼šè¯ç®¡ç†æµ‹è¯• | 10 |
| `tests/e2e/ai-module.spec.ts` | AIæ¨¡å—æµ‹è¯• | 10 |
| `tests/e2e/flow-engine.spec.ts` | æµç¨‹å¼•æ“æµ‹è¯• | 9 |
| `tests/e2e/monitoring.spec.ts` | ç›‘æ§å‘Šè­¦æµ‹è¯• | 10 |
| `tests/e2e/system-settings.spec.ts` | ç³»ç»Ÿè®¾ç½®æµ‹è¯• | 10 |
| `tests/e2e/dashboard.spec.ts` | ä»ªè¡¨ç›˜æµ‹è¯• | 12 |
| `tests/e2e/collab-analytics.spec.ts` | ååŒåˆ†ææµ‹è¯• | 12 |

### æ€»è®¡

- **æµ‹è¯•æ–‡ä»¶æ•°**: 9
- **æµ‹è¯•ç”¨ä¾‹æ•°**: 91

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Š

### ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶

1. **HTML æŠ¥å‘Š**: `playwright-report/index.html`
   - Playwright å®˜æ–¹æŠ¥å‘Šï¼ŒåŒ…å«è¯¦ç»†çš„æµ‹è¯•ç»“æœå’Œæˆªå›¾

2. **JSON æŠ¥å‘Š**: `test-results.json`
   - æœºå™¨å¯è¯»çš„æµ‹è¯•ç»“æœï¼Œä¾¿äºé›†æˆåˆ° CI/CD

3. **è¯¦ç»†æŠ¥å‘Š**: `test-report-detailed.html`
   - è‡ªå®šä¹‰çš„ HTML æŠ¥å‘Šï¼ŒåŒ…å«ç»Ÿè®¡å’Œå¯è§†åŒ–

### æŸ¥çœ‹æŠ¥å‘Š

```bash
# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æŠ¥å‘Š
npx playwright show-report

# æˆ–ç›´æ¥æ‰“å¼€ HTML æ–‡ä»¶
open test-report-detailed.html
```

## ğŸ¯ æµ‹è¯•ç”¨ä¾‹è¯´æ˜

### 1. é¦–é¡µæ ‡ç­¾é¡µæµ‹è¯• (`home-tabs.spec.ts`)

æµ‹è¯•é¦–é¡µæ‰€æœ‰æ ‡ç­¾é¡µçš„åŠ è½½å’Œåˆ‡æ¢åŠŸèƒ½ï¼š

- âœ… é¦–é¡µåŠ è½½æµ‹è¯•
- âœ… ä»ªè¡¨ç›˜æ ‡ç­¾é¡µæµ‹è¯•
- âœ… ä¼šè¯ç®¡ç†æ ‡ç­¾é¡µæµ‹è¯•
- âœ… æœºå™¨äººç®¡ç†æ ‡ç­¾é¡µæµ‹è¯•
- âœ… ç›‘æ§å‘Šè­¦æ ‡ç­¾é¡µæµ‹è¯•
- âœ… AIæ¨¡å—æ ‡ç­¾é¡µæµ‹è¯•
- âœ… æµç¨‹å¼•æ“æ ‡ç­¾é¡µæµ‹è¯•
- âœ… ååŒåˆ†ææ ‡ç­¾é¡µæµ‹è¯•
- âœ… ç³»ç»Ÿè®¾ç½®æ ‡ç­¾é¡µæµ‹è¯•
- âœ… æ ‡ç­¾é¡µåˆ‡æ¢æµ‹è¯•

### 2. æœºå™¨äººç®¡ç†æµ‹è¯• (`robot-management.spec.ts`)

æµ‹è¯•æœºå™¨äººç®¡ç†ç›¸å…³åŠŸèƒ½ï¼š

- âœ… æœºå™¨äººåˆ—è¡¨åŠ è½½æµ‹è¯•
- âœ… æœºå™¨äººæœç´¢åŠŸèƒ½æµ‹è¯•
- âœ… åˆ·æ–°æŒ‰é’®åŠŸèƒ½æµ‹è¯•
- âœ… åˆ›å»ºæœºå™¨äººæŒ‰é’®æµ‹è¯•
- âœ… æœºå™¨äººåˆ—è¡¨å¡ç‰‡æ˜¾ç¤ºæµ‹è¯•
- âœ… æœºå™¨äººç¼–è¾‘åŠŸèƒ½æµ‹è¯•
- âœ… æœºå™¨äººåˆ é™¤åŠŸèƒ½æµ‹è¯•
- âœ… æœºå™¨äººçŠ¶æ€åˆ‡æ¢åŠŸèƒ½æµ‹è¯•

### 3. ä¼šè¯ç®¡ç†æµ‹è¯• (`session-management.spec.ts`)

æµ‹è¯•ä¼šè¯ç®¡ç†ç›¸å…³åŠŸèƒ½ï¼š

- âœ… ä¼šè¯åˆ—è¡¨åŠ è½½æµ‹è¯•
- âœ… ä¼šè¯åˆ—è¡¨æ˜¾ç¤ºæµ‹è¯•
- âœ… ä¼šè¯æœç´¢åŠŸèƒ½æµ‹è¯•
- âœ… ä¼šè¯ç­›é€‰åŠŸèƒ½æµ‹è¯•
- âœ… ä¼šè¯æ’åºåŠŸèƒ½æµ‹è¯•
- âœ… ä¼šè¯è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½æµ‹è¯•
- âœ… ä¼šè¯æ¶ˆæ¯æ˜¾ç¤ºæµ‹è¯•
- âœ… ä¼šè¯å¯¼å‡ºåŠŸèƒ½æµ‹è¯•
- âœ… ä¼šè¯åˆ·æ–°åŠŸèƒ½æµ‹è¯•
- âœ… ä¼šè¯ç»Ÿè®¡æ•°æ®æµ‹è¯•

### 4. AIæ¨¡å—æµ‹è¯• (`ai-module.spec.ts`)

æµ‹è¯•AIæ¨¡å—ç›¸å…³åŠŸèƒ½ï¼š

- âœ… AIæ¨¡å—åŠ è½½æµ‹è¯•
- âœ… AIæ¨¡å‹åˆ—è¡¨åŠ è½½æµ‹è¯•
- âœ… AIè§’è‰²åˆ—è¡¨åŠ è½½æµ‹è¯•
- âœ… AIæ¨¡æ¿åˆ—è¡¨åŠ è½½æµ‹è¯•
- âœ… AIæµ‹è¯•åŠŸèƒ½æµ‹è¯•
- âœ… AIæ¨¡å‹é€‰æ‹©åŠŸèƒ½æµ‹è¯•
- âœ… AIè§’è‰²é€‰æ‹©åŠŸèƒ½æµ‹è¯•
- âœ… AIå‚æ•°é…ç½®åŠŸèƒ½æµ‹è¯•
- âœ… AIå“åº”æ˜¾ç¤ºåŠŸèƒ½æµ‹è¯•
- âœ… AIå†å²è®°å½•åŠŸèƒ½æµ‹è¯•

### 5. æµç¨‹å¼•æ“æµ‹è¯• (`flow-engine.spec.ts`)

æµ‹è¯•æµç¨‹å¼•æ“ç›¸å…³åŠŸèƒ½ï¼š

- âœ… æµç¨‹å¼•æ“åŠ è½½æµ‹è¯•
- âœ… æµç¨‹åˆ—è¡¨åŠ è½½æµ‹è¯•
- âœ… åˆ›å»ºæµç¨‹æŒ‰é’®æµ‹è¯•
- âœ… æµç¨‹ç¼–è¾‘å™¨æµ‹è¯•
- âœ… æµç¨‹èŠ‚ç‚¹æ·»åŠ æµ‹è¯•
- âœ… æµç¨‹æ‰§è¡Œæµ‹è¯•
- âœ… æµç¨‹åˆ é™¤åŠŸèƒ½æµ‹è¯•
- âœ… æµç¨‹çŠ¶æ€åˆ‡æ¢æµ‹è¯•
- âœ… æµç¨‹æœç´¢åŠŸèƒ½æµ‹è¯•

### 6. ç›‘æ§å‘Šè­¦æµ‹è¯• (`monitoring.spec.ts`)

æµ‹è¯•ç›‘æ§å‘Šè­¦ç›¸å…³åŠŸèƒ½ï¼š

- âœ… ç›‘æ§å‘Šè­¦åŠ è½½æµ‹è¯•
- âœ… ç›‘æ§æŒ‡æ ‡æ˜¾ç¤ºæµ‹è¯•
- âœ… å›¾è¡¨æ˜¾ç¤ºæµ‹è¯•
- âœ… å‘Šè­¦åˆ—è¡¨æ˜¾ç¤ºæµ‹è¯•
- âœ… å‘Šè­¦è§„åˆ™é…ç½®æµ‹è¯•
- âœ… å‘Šè­¦å†å²æŸ¥çœ‹æµ‹è¯•
- âœ… ç›‘æ§æ ‡ç­¾é¡µåˆ‡æ¢æµ‹è¯•
- âœ… å®æ—¶ç›‘æ§æ›´æ–°æµ‹è¯•
- âœ… ç›‘æ§æ•°æ®åˆ·æ–°åŠŸèƒ½æµ‹è¯•
- âœ… ç›‘æ§æ•°æ®å¯¼å‡ºåŠŸèƒ½æµ‹è¯•

### 7. ç³»ç»Ÿè®¾ç½®æµ‹è¯• (`system-settings.spec.ts`)

æµ‹è¯•ç³»ç»Ÿè®¾ç½®ç›¸å…³åŠŸèƒ½ï¼š

- âœ… ç³»ç»Ÿè®¾ç½®åŠ è½½æµ‹è¯•
- âœ… è®¾ç½®æ ‡ç­¾é¡µåˆ‡æ¢æµ‹è¯•
- âœ… AIé…ç½®æµ‹è¯•
- âœ… é€šçŸ¥è®¾ç½®æµ‹è¯•
- âœ… ä¼šè¯è®¾ç½®æµ‹è¯•
- âœ… ç³»ç»Ÿä¿¡æ¯æ˜¾ç¤ºæµ‹è¯•
- âœ… è®¾ç½®ä¿å­˜åŠŸèƒ½æµ‹è¯•
- âœ… è®¾ç½®é‡ç½®åŠŸèƒ½æµ‹è¯•
- âœ… ç”¨æˆ·æƒé™è®¾ç½®æµ‹è¯•
- âœ… æ—¥å¿—è®¾ç½®æµ‹è¯•

### 8. ä»ªè¡¨ç›˜æµ‹è¯• (`dashboard.spec.ts`)

æµ‹è¯•ä»ªè¡¨ç›˜ç›¸å…³åŠŸèƒ½ï¼š

- âœ… ä»ªè¡¨ç›˜åŠ è½½æµ‹è¯•
- âœ… ç»Ÿè®¡å¡ç‰‡æ˜¾ç¤ºæµ‹è¯•
- âœ… Tokenç»Ÿè®¡æ˜¾ç¤ºæµ‹è¯•
- âœ… å›¾è¡¨æ˜¾ç¤ºæµ‹è¯•
- âœ… ä¼šè¯ç»Ÿè®¡æ˜¾ç¤ºæµ‹è¯•
- âœ… æœºå™¨äººç»Ÿè®¡æ˜¾ç¤ºæµ‹è¯•
- âœ… æ´»åŠ¨è¶‹åŠ¿æ˜¾ç¤ºæµ‹è¯•
- âœ… æ—¶é—´èŒƒå›´é€‰æ‹©æµ‹è¯•
- âœ… ä»ªè¡¨ç›˜åˆ·æ–°åŠŸèƒ½æµ‹è¯•
- âœ… ä»ªè¡¨ç›˜æ•°æ®å¯¼å‡ºåŠŸèƒ½æµ‹è¯•
- âœ… ä»ªè¡¨ç›˜å¸ƒå±€æµ‹è¯•
- âœ… ä»ªè¡¨ç›˜å“åº”å¼æµ‹è¯•

### 9. ååŒåˆ†ææµ‹è¯• (`collab-analytics.spec.ts`)

æµ‹è¯•ååŒåˆ†æç›¸å…³åŠŸèƒ½ï¼š

- âœ… ååŒåˆ†æåŠ è½½æµ‹è¯•
- âœ… å·¥ä½œäººå‘˜åˆ—è¡¨æ˜¾ç¤ºæµ‹è¯•
- âœ… ååŒå†³ç­–æ—¥å¿—æ˜¾ç¤ºæµ‹è¯•
- âœ… å·¥ä½œäººå‘˜æ´»åŠ¨ç»Ÿè®¡æµ‹è¯•
- âœ… å›¢é˜Ÿç»Ÿè®¡æ˜¾ç¤ºæµ‹è¯•
- âœ… ååŒå›¾è¡¨æ˜¾ç¤ºæµ‹è¯•
- âœ… å·¥ä½œäººå‘˜è¯¦æƒ…æŸ¥çœ‹æµ‹è¯•
- âœ… ååŒåˆ†ææ ‡ç­¾é¡µåˆ‡æ¢æµ‹è¯•
- âœ… å·¥ä½œäººå‘˜æœç´¢åŠŸèƒ½æµ‹è¯•
- âœ… ååŒåˆ†æåˆ·æ–°åŠŸèƒ½æµ‹è¯•
- âœ… ååŒåˆ†ææŠ¥å‘Šå¯¼å‡ºåŠŸèƒ½æµ‹è¯•
- âœ… ä¸šåŠ¡è§’è‰²åˆ†ææµ‹è¯•

## ğŸ”§ é…ç½®è¯´æ˜

### Playwright é…ç½® (`playwright.config.ts`)

```typescript
{
  testDir: './tests/e2e',              // æµ‹è¯•ç›®å½•
  baseURL: 'http://localhost:5000',    // åŸºç¡€URL
  timeout: 60000,                      // æµ‹è¯•è¶…æ—¶
  retries: 1,                          // é‡è¯•æ¬¡æ•°
  workers: 4,                          // å¹¶å‘æ•°
  reporter: [                          // æŠ¥å‘Šå™¨
    ['html', { outputFolder: 'playwright-report' }],
    ['json', { outputFile: 'test-results.json' }],
    ['list']
  ]
}
```

### æµè§ˆå™¨é…ç½®

æ”¯æŒä»¥ä¸‹æµè§ˆå™¨ï¼š

- âœ… Chromium
- âœ… Firefox
- âœ… WebKit (Safari)
- âœ… Mobile Chrome
- âœ… Mobile Safari

## ğŸ› è°ƒè¯•æµ‹è¯•

### ä½¿ç”¨è°ƒè¯•æ¨¡å¼

```bash
# å¯åŠ¨è°ƒè¯•æ¨¡å¼
npx playwright test --debug

# è°ƒè¯•ç‰¹å®šæµ‹è¯•
npx playwright test tests/e2e/home-tabs.spec.ts --debug
```

### ä½¿ç”¨ Playwright Inspector

```bash
# è¿è¡Œæµ‹è¯•æ—¶æ‰“å¼€ Inspector
npx playwright test --debug

# æˆ–ä½¿ç”¨ä»£ç è°ƒè¯•
await page.pause();
```

### æŸ¥çœ‹æµ‹è¯•å¤±è´¥ä¿¡æ¯

```bash
# åªè¿è¡Œå¤±è´¥çš„æµ‹è¯•
npx playwright test --only-failed

# æŸ¥çœ‹å¤±è´¥æµ‹è¯•çš„æˆªå›¾å’Œè§†é¢‘
ls test-results/
```

## ğŸ“ ç¼–å†™æ–°çš„æµ‹è¯•

### åˆ›å»ºæ–°çš„æµ‹è¯•æ–‡ä»¶

```typescript
import { test, expect } from '@playwright/test';

test.describe('æ–°åŠŸèƒ½æµ‹è¯•', () => {

  test.beforeEach(async ({ page }) => {
    await page.goto('/');
    await page.waitForLoadState('networkidle');
  });

  test('æµ‹è¯•ç”¨ä¾‹1', async ({ page }) => {
    // æµ‹è¯•é€»è¾‘
    await expect(page.locator('.element')).toBeVisible();
  });

  test('æµ‹è¯•ç”¨ä¾‹2', async ({ page }) => {
    // æµ‹è¯•é€»è¾‘
    await page.click('button');
  });
});
```

### æœ€ä½³å®è·µ

1. **ä½¿ç”¨ `describe` ç»„ç»‡æµ‹è¯•**
   ```typescript
   test.describe('åŠŸèƒ½æ¨¡å—', () => {
     // ç›¸å…³æµ‹è¯•
   });
   ```

2. **ä½¿ç”¨ `beforeEach` è®¾ç½®åˆå§‹çŠ¶æ€**
   ```typescript
   test.beforeEach(async ({ page }) => {
     await page.goto('/');
   });
   ```

3. **ä½¿ç”¨ `expect` æ–­è¨€**
   ```typescript
   await expect(element).toBeVisible();
   await expect(element).toHaveText('text');
   ```

4. **ä½¿ç”¨é€‰æ‹©å™¨å®šä½å…ƒç´ **
   ```typescript
   // æ–‡æœ¬é€‰æ‹©å™¨
   page.locator('text=æŒ‰é’®æ–‡æœ¬')

   // CSS é€‰æ‹©å™¨
   page.locator('.class-name')

   // è§’è‰²
   page.locator('[role="button"]')

   // æ•°æ®å±æ€§
   page.locator('[data-testid="submit"]')
   ```

## ğŸ”„ CI/CD é›†æˆ

### GitHub Actions ç¤ºä¾‹

```yaml
name: E2E Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: pnpm/action-setup@v2
        with:
          version: 8
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'pnpm'
      - run: pnpm install
      - run: npx playwright install --with-deps
      - run: pnpm playwright test
      - uses: actions/upload-artifact@v3
        if: always()
        with:
          name: playwright-report
          path: playwright-report/
          retention-days: 30
```

## ğŸ“ å¸¸è§é—®é¢˜

### 1. æµ‹è¯•å¤±è´¥ï¼šæ‰¾ä¸åˆ°å…ƒç´ 

**åŸå› **: å…ƒç´ å°šæœªåŠ è½½æˆ–é€‰æ‹©å™¨ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**:
- å¢åŠ ç­‰å¾…æ—¶é—´: `await page.waitForTimeout(2000);`
- ä½¿ç”¨æ›´å…·ä½“çš„é€‰æ‹©å™¨
- æ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨ iframe ä¸­

### 2. æµ‹è¯•è¶…æ—¶

**åŸå› **: é¡µé¢åŠ è½½æ…¢æˆ–ç½‘ç»œé—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
- å¢åŠ è¶…æ—¶æ—¶é—´: `test.setTimeout(120000);`
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ä½¿ç”¨ `page.waitForLoadState('networkidle')`

### 3. æµè§ˆå™¨æœªå®‰è£…

**åŸå› **: Playwright æµè§ˆå™¨æœªå®‰è£…

**è§£å†³æ–¹æ¡ˆ**:
```bash
npx playwright install --with-deps
```

### 4. æµ‹è¯•åœ¨ä¸åŒæµè§ˆå™¨ä¸­å¤±è´¥

**åŸå› **: æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
- åœ¨ç‰¹å®šæµè§ˆå™¨ä¸­è¿è¡Œ: `npx playwright test --project=chromium`
- æ£€æŸ¥æµè§ˆå™¨ç‰¹å®šçš„ CSS æˆ– API
- ä½¿ç”¨è·¨æµè§ˆå™¨çš„ API

## ğŸ“š ç›¸å…³èµ„æº

- [Playwright å®˜æ–¹æ–‡æ¡£](https://playwright.dev)
- [Playwright æœ€ä½³å®è·µ](https://playwright.dev/docs/best-practices)
- [é€‰æ‹©å™¨æŒ‡å—](https://playwright.dev/docs/selectors)
- [æ–­è¨€åˆ—è¡¨](https://playwright.dev/docs/test-assertions)

## ğŸ‰ æ€»ç»“

æœ¬æµ‹è¯•å¥—ä»¶æä¾›äº†å…¨é¢çš„å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ï¼ŒåŒ…æ‹¬ï¼š

- âœ… 91 ä¸ªæµ‹è¯•ç”¨ä¾‹
- âœ… 9 ä¸ªæµ‹è¯•æ–‡ä»¶
- âœ… è¦†ç›–æ‰€æœ‰ä¸»è¦åŠŸèƒ½æ¨¡å—
- âœ… æ”¯æŒå¤šæµè§ˆå™¨æµ‹è¯•
- âœ… è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

é€šè¿‡è¿è¡Œè¿™äº›æµ‹è¯•ï¼Œå¯ä»¥ç¡®ä¿å‰ç«¯åº”ç”¨çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚
