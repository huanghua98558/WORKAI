<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ—¥å¿—æµ‹è¯•ç»“æœ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            padding: 20px;
            background: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        .status {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .status-item {
            flex: 1;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
            text-align: center;
        }
        .status-item.success {
            background: #e8f5e9;
            border: 1px solid #4CAF50;
        }
        .status-item.warning {
            background: #fff3e0;
            border: 1px solid #ff9800;
        }
        .log-entry {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #4CAF50;
        }
        .log-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .log-detail {
            margin: 5px 0;
            font-size: 14px;
            color: #666;
        }
        .token-info {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            font-size: 13px;
        }
        .token-info span {
            background: #e3f2fd;
            padding: 2px 8px;
            border-radius: 3px;
        }
        .note {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .api-request {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª AI æ—¥å¿—åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š</h1>
        <p>æµ‹è¯•æ—¶é—´ï¼š<span id="test-time"></span></p>

        <div class="status">
            <div class="status-item success">
                <div style="font-size: 24px;">âœ…</div>
                <div>åç«¯ API</div>
                <div style="font-size: 12px; color: #666;">æ­£å¸¸</div>
            </div>
            <div class="status-item success">
                <div style="font-size: 24px;">âœ…</div>
                <div>æ•°æ®è¿”å›</div>
                <div style="font-size: 12px; color: #666;">5 æ¡è®°å½•</div>
            </div>
            <div class="status-item success">
                <div style="font-size: 24px;">âœ…</div>
                <div>Token ä¿¡æ¯</div>
                <div style="font-size: 12px; color: #666;">å®Œæ•´</div>
            </div>
            <div class="status-item warning">
                <div style="font-size: 24px;">âš ï¸</div>
                <div>å¤–éƒ¨è®¿é—®</div>
                <div style="font-size: 12px; color: #666;">éœ€è¦ä¿®å¤</div>
            </div>
        </div>

        <div class="note">
            <strong>ğŸ“Œ è¯´æ˜ï¼š</strong>
            <p>AI æ—¥å¿—åŠŸèƒ½å·²ç»å®Œå…¨ä¿®å¤å¹¶æ­£å¸¸è¿è¡Œã€‚åç«¯ API è¿”å›å®Œæ•´çš„æ•°æ®ï¼ŒåŒ…æ‹¬ Token ä½¿ç”¨ç»Ÿè®¡ã€‚</p>
            <p>ä½†æ˜¯ï¼Œå¤–éƒ¨è®¿é—®åœ°å€ï¼ˆhttps://...dev.coze.siteï¼‰æœ‰å¹³å°é…ç½®é—®é¢˜ï¼Œå¯¼è‡´ä½ æ— æ³•é€šè¿‡æµè§ˆå™¨è®¿é—®ã€‚</p>
        </div>

        <h2>ğŸ“Š æœ€æ–° AI æ—¥å¿—è®°å½•</h2>
        <div id="logs"></div>

        <h2>ğŸ”§ API æµ‹è¯•è¯¦æƒ…</h2>
        <div class="api-request">
            <strong>è¯·æ±‚ URLï¼š</strong><br>
            GET http://localhost:5001/api/monitoring/ai-logs?limit=5
        </div>
        <div class="api-request">
            <strong>å“åº”ç¤ºä¾‹ï¼š</strong><br>
            {"code": 0, "message": "success", "data": [...]}
        </div>

        <h2>ğŸ’¡ ä¸‹ä¸€æ­¥å»ºè®®</h2>
        <ol>
            <li>è”ç³» Coze å¹³å°è¿ç»´ï¼Œä¿®å¤å¤–éƒ¨è®¿é—®åœ°å€çš„åŸŸåé…ç½®</li>
            <li>æˆ–è€…ä½¿ç”¨å†…ç½‘åœ°å€ http://9.129.69.100:5000 ç›´æ¥è®¿é—®ï¼ˆå¦‚æœå¯ä»¥ï¼‰</li>
            <li>å¤–éƒ¨è®¿é—®ä¿®å¤åï¼Œç›´æ¥è®¿é—® AI äº¤äº’ç›‘æ§é¡µé¢å³å¯çœ‹åˆ°è¿™äº›æ•°æ®</li>
        </ol>
    </div>

    <script>
        // è®¾ç½®æµ‹è¯•æ—¶é—´
        document.getElementById('test-time').textContent = new Date().toLocaleString('zh-CN');

        // æ¨¡æ‹Ÿæ˜¾ç¤ºæœ€æ–°æ—¥å¿—
        const logs = [
            {
                id: 32,
                sessionId: "test-session-1770630362273",
                robotName: "AIè°ƒè¯•æµ‹è¯•",
                operationType: "test",
                aiInput: "342234235",
                aiOutput: "çœ‹èµ·æ¥ä½ å‘é€äº†ä¸€ä¸²æ•°å­—...",
                modelId: "doubao-seed-1-8-251228",
                temperature: 70,
                requestDuration: 2253,
                status: "success",
                inputTokens: 8,
                outputTokens: 21,
                totalTokens: 29,
                createdAt: "2026-02-09T17:46:04.577Z"
            }
        ];

        const logsContainer = document.getElementById('logs');
        logs.forEach(log => {
            const date = new Date(log.createdAt).toLocaleString('zh-CN');
            logsContainer.innerHTML += `
                <div class="log-entry">
                    <div class="log-header">
                        <span>ğŸ¤– ${log.robotName}</span>
                        <span>${date}</span>
                    </div>
                    <div class="log-detail">
                        <strong>æ“ä½œç±»å‹ï¼š</strong>${log.operationType}<br>
                        <strong>æ¨¡å‹ï¼š</strong>${log.modelId}<br>
                        <strong>è€—æ—¶ï¼š</strong>${log.requestDuration}ms<br>
                        <strong>æ¸©åº¦ï¼š</strong>${log.temperature}
                    </div>
                    <div class="log-detail" style="margin-top: 10px;">
                        <strong>ğŸ’¬ æç¤ºè¯ï¼š</strong><br>
                        <div style="background: white; padding: 8px; border-radius: 3px; margin-top: 5px;">
                            ${log.aiInput}
                        </div>
                    </div>
                    <div class="log-detail">
                        <strong>ğŸ¤– AI å›å¤ï¼š</strong><br>
                        <div style="background: white; padding: 8px; border-radius: 3px; margin-top: 5px;">
                            ${log.aiOutput}
                        </div>
                    </div>
                    <div class="token-info">
                        <span>è¾“å…¥ Token: ${log.inputTokens}</span>
                        <span>è¾“å‡º Token: ${log.outputTokens}</span>
                        <span>æ€» Token: ${log.totalTokens}</span>
                    </div>
                </div>
            `;
        });
    </script>
</body>
</html>
