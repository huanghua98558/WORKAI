# 前端页面设计

> **文档版本**: v1.0
> **创建日期**: 2024-01-01
> **维护者**: WorkTool AI 团队

---

## 📋 目录

- [一、页面概述](#一页面概述)
- [二、流程引擎管理页面](#二流程引擎管理页面)
- [三、流程可视化编辑器](#三流程可视化编辑器)
- [四、售后任务配置页面](#四售后任务配置页面)
- [五、UI/UX 设计规范](#五uiux-设计规范)

---

## 一、页面概述

### 1.1 页面结构

```
src/app/
├── page.tsx                           // 主入口
├── layout.tsx                         // 全局布局
└── flow-engine/
    ├── page.tsx                       // 流程引擎管理页面
    ├── editor/
    │   └── page.tsx                   // 流程可视化编辑器
    ├── components/
    │   ├── FlowList.tsx               // 流程列表组件
    │   ├── FlowDetail.tsx             // 流程详情组件
    │   ├── FlowEditor.tsx             // 流程编辑器组件
    │   ├── NodePalette.tsx            // 节点面板组件
    │   ├── NodePropertyPanel.tsx      // 节点属性面板组件
    │   └── TrackTaskList.tsx          // 跟踪任务列表组件
    └── types.ts                       // TypeScript 类型定义
```

### 1.2 技术栈

- **框架**: Next.js 16 (App Router)
- **UI 组件库**: shadcn/ui
- **样式**: Tailwind CSS 4
- **状态管理**: React Context / Zustand
- **可视化**: React Flow
- **图标**: Lucide React

---

## 二、流程引擎管理页面

### 2.1 页面布局

```
┌─────────────────────────────────────────────────────────────────────┐
│  侧边栏                          主内容区                            │
│  ┌──────────────┐  ┌───────────────────────────────────────────┐  │
│  │   Logo       │  │  流程引擎管理                              │  │
│  │              │  │  [新建流程] [批量导入]                      │  │
│  │  流程管理    │  │                                           │  │
│  │  • 流程列表  │  │  筛选: [全部] [已激活] [草稿] [已停用]    │  │
│  │  • 流程详情  │  │  搜索: [输入流程名称...]                    │  │
│  │  • 流程编辑  │  │                                           │  │
│  │              │  │  ┌───────────────────────────────────────┐ │  │
│  │  任务管理    │  │  │ 流程列表                                │ │  │
│  │  • 跟踪任务  │  │  │                                       │ │  │
│  │  • 售后任务  │  │  │ ┌──────────────────────────────────┐  │ │  │
│  │              │  │  │ │ 统一消息处理流程                   │  │ │  │
│  │  指令队列    │  │  │ │ 消息类型: message_routing         │  │ │  │
│  │  • 待发送    │  │  │ │ 状态: 已激活 (v2.0)               │  │ │  │
│  │  • 已发送    │  │  │ │ 创建时间: 2024-01-01 10:00:00     │  │ │  │
│  │              │  │  │ │ [详情] [编辑] [激活/停用] [删除]  │  │ │  │
│  │  监控面板    │  │  │ └──────────────────────────────────┘  │ │  │
│  │  • 实时监控  │  │  │                                       │ │  │
│  │  • 告警面板  │  │  │ ┌──────────────────────────────────┐  │ │  │
│  │              │  │  │ │ 售后处理流程                       │  │ │  │
│  └──────────────┘  │  │ │ 消息类型: after_sales              │  │ │  │
│                    │  │ │ 状态: 草稿 (v1.0)                  │  │ │  │
│                    │  │ │ 创建时间: 2024-01-01 09:00:00     │  │ │  │
│                    │  │ │ [详情] [编辑] [激活] [删除]       │  │ │  │
│                    │  │ └──────────────────────────────────┘  │ │  │
│                    │  │                                       │ │  │
│                    │  │                                       │ │  │
│                    │  └───────────────────────────────────────┘ │  │
│                    │                                           │  │
│                    │  共 2 个流程，第 1 / 1 页                 │  │
│                    └───────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 流程列表组件

**功能**:
- 显示所有流程定义
- 支持筛选（全部/已激活/草稿/已停用）
- 支持搜索（按流程名称）
- 支持操作（详情/编辑/激活/停用/删除）
- 支持分页

**字段**:
- 流程名称
- 流程类型
- 版本号
- 状态（已激活/草稿/已停用）
- 创建时间
- 更新时间

**操作按钮**:
- 详情：查看流程详情
- 编辑：进入流程编辑器
- 激活/停用：切换流程状态
- 删除：删除流程（需确认）

### 2.3 流程详情组件

**功能**:
- 显示流程定义的详细信息
- 显示流程节点和连接关系
- 显示流程版本历史
- 显示流程执行统计

**显示内容**:
- 基本信息（名称、描述、类型、版本、状态）
- 流程图（静态展示）
- 流程统计（执行次数、成功率、平均执行时间）
- 版本历史（版本列表、更新时间、更新人）

### 2.4 跟踪任务列表组件

**功能**:
- 显示所有跟踪任务
- 支持筛选（任务类型、状态、优先级）
- 支持搜索（按用户名、群名）
- 支持操作（详情/完成/删除）

**字段**:
- 任务 ID
- 任务类型（运营/售后/告警）
- 目标用户
- 群名称
- 任务要求
- 优先级（critical/high/medium/low）
- 状态（pending/responded/in_progress/completed/timeout）
- 创建时间
- 截止时间

**优先级颜色标识**:
- critical: 🔴 红色
- high: 🟠 橙色
- medium: 🟡 黄色
- low: 🟢 绿色

**状态颜色标识**:
- pending: ⚪ 灰色
- responded: 🔵 蓝色
- in_progress: 🟡 黄色
- completed: 🟢 绿色
- timeout: 🔴 红色

---

## 三、流程可视化编辑器

### 3.1 编辑器布局

```
┌─────────────────────────────────────────────────────────────────────┐
│  流程编辑器 - 统一消息处理流程 (v2.0)                                 │
│  [保存] [取消] [预览] [导出] [导入]                                    │
├──────────────┬─────────────────────────────────────────┬─────────────┤
│  节点面板    │  画布区域                                │  属性面板    │
│  ┌────────┐  │                                         │  ┌────────┐ │
│  │触发器  │  │  ┌──────────┐  ┌──────────┐            │  │节点属性  │ │
│  │• 消息  │  │  │ 消息接收 │──▶│ 身份识别 │            │  │        │ │
│  │• Webhook│  │  │ 与保存   │   └──────────┘            │  │  ID:    │ │
│  └────────┘  │                                         │  │  node-1 │ │
│  ┌────────┐  │                                         │  │        │ │
│  │条件节点│  │           ┌──────────┐                 │  │ 类型:   │ │
│  │• 角色路由│  │           │ 角色路由 │                 │  │ trigger │ │
│  │• 优先级  │  │           └──────────┘                 │  │        │ │
│  └────────┘  │       ┌───────┴───────┐                 │  │ 名称:   │ │
│              │       │               │                 │  │ 消息接收│ │
│  ┌────────┐  │       ▼               ▼                 │  │        │ │
│  │处理节点│  │  ┌──────────┐  ┌──────────┐            │  │ 配置:   │ │
│  │• AI回复 │  │  │运营消息  │  │工作人员  │            │  │  去重:  │ │
│  │• 告警处理│  │  │ 处理     │  │ 消息处理 │            │  │  true  │ │
│  │• 延迟控制│  │  └──────────┘  └──────────┘            │  │  缓存:  │ │
│  └────────┘  │                                         │  │  redis │ │
│  ┌────────┐  │       ┌──────────┐                     │  │        │ │
│  │运营节点│  │       │ 售后 @    │                     │  │[更新]  │ │
│  │• 运营跟踪│  │       │ 消息处理 │                     │  └────────┘ │
│  │• 响应检测│  │       └──────────┘                     │             │
│  └────────┘  │                                         │  连接属性   │
│  ┌────────┐  │                                         │  ┌────────┐ │
│  │工作人员│  │       ┌──────────┐                     │  │ ID:     │ │
│  │节点    │  │       │ 用户消息  │                     │  │ conn-1 │ │
│  │• 活跃度│  │       │ 处理     │                     │  │        │ │
│  │• 介入判断│  │       └──────────┘                     │  │ 源节点: │ │
│  └────────┘  │                                         │  │ node-1 │ │
│  ┌────────┐  │                                         │  │        │ │
│  │售后节点│  │                                         │  │ 目标:   │ │
│  │• 任务创建│  │                                         │  │ node-2 │ │
│  │• 响应检测│  │                                         │  │        │ │
│  └────────┘  │                                         │  │ 条件:   │ │
│  ┌────────┐  │                                         │  │ 无     │ │
│  │用户节点│  │                                         │  └────────┘ │
│  │• 意图识别│  │                                         │             │
│  │• AI回复 │  │                                         │             │
│  └────────┘  │                                         │             │
└──────────────┴─────────────────────────────────────────┴─────────────┘
```

### 3.2 节点面板组件

**功能**:
- 显示所有可用节点类型
- 支持拖拽节点到画布
- 支持搜索节点

**节点分类**:
1. **触发器节点**
   - 消息接收与保存
   - Webhook 触发

2. **条件节点**
   - 角色路由
   - 优先级判断
   - 延迟控制
   - 告警判断

3. **处理节点**
   - AI 回复
   - 告警处理
   - 延迟控制
   - 机器人通讯

4. **运营节点**
   - 运营跟踪
   - 响应检测
   - 冲突调和

5. **工作人员节点**
   - 活跃度记录
   - 介入判断

6. **售后节点**
   - 任务创建
   - 响应检测（含机器人安抚）
   - 任务完成跟踪

7. **用户节点**
   - 意图识别
   - AI 回复生成
   - 情绪分析

8. **会话节点**
   - 会话更新
   - 上下文管理
   - 协同分析

### 3.3 属性面板组件

**功能**:
- 显示选中节点的属性
- 支持编辑节点属性
- 支持编辑连接关系属性

**节点属性**:
- 基本信息（ID、类型、名称、描述）
- 配置参数（根据节点类型不同）
- 执行参数（超时时间、重试次数等）

**连接关系属性**:
- 连接 ID
- 源节点
- 目标节点
- 条件表达式

### 3.4 画布交互

**拖拽节点**:
- 从节点面板拖拽节点到画布
- 支持多选拖拽
- 支持复制粘贴

**连接节点**:
- 从节点边缘拖拽出连接线
- 连接到目标节点
- 支持条件表达式配置

**节点编辑**:
- 单击选中节点
- 双击编辑节点名称
- 右键显示菜单（复制/删除/禁用）

**画布操作**:
- 鼠标滚轮缩放
- 空格+鼠标拖拽平移
- 自适应大小
- 网格背景

**快捷键**:
- `Ctrl+C`: 复制
- `Ctrl+V`: 粘贴
- `Ctrl+Z`: 撤销
- `Ctrl+Y`: 重做
- `Delete`: 删除选中节点
- `Ctrl+S`: 保存
- `Ctrl+Shift+S`: 另存为

---

## 四、售后任务配置页面

### 4.1 页面布局

```
┌─────────────────────────────────────────────────────────────────────┐
│  售后任务配置                                                         │
│  [保存] [取消] [预览] [测试]                                          │
├─────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────┐│
│  │  机器人安抚配置                                                  ││
│  │                                                                   ││
│  │  在线安抚消息                                                     ││
│  │  ┌────────────────────────────────────────────────────────────┐ ││
│  │  │ @用户1 好的，请稍等，售后人员马上就来处理 👍                 │ ││
│  │  └────────────────────────────────────────────────────────────┘ ││
│  │                                                                   ││
│  │  忙碌安抚消息                                                     ││
│  │  ┌────────────────────────────────────────────────────────────┐ ││
│  │  │ @用户1 好的，请稍等，售后人员正在处理其他任务，马上就来 ⏳     │ ││
│  │  └────────────────────────────────────────────────────────────┘ ││
│  │                                                                   ││
│  │  离线安抚消息                                                     ││
│  │  ┌────────────────────────────────────────────────────────────┐ ││
│  │  │ @用户1 好的，请稍等，已通知售后人员，马上会来处理 🔔           │ ││
│  │  └────────────────────────────────────────────────────────────┘ ││
│  │                                                                   ││
│  └─────────────────────────────────────────────────────────────────┘│
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────────┐│
│  │  售后人员通知配置                                                ││
│  │                                                                   ││
│  │  用户响应时通知消息                                               ││
│  │  ┌────────────────────────────────────────────────────────────┐ ││
│  │  │ 【紧急】XXX 群 XXX 用户已响应：[用户消息内容]                 │ ││
│  │  └────────────────────────────────────────────────────────────┘ ││
│  │                                                                   ││
│  │  无人回应时通知消息                                              ││
│  │  ┌────────────────────────────────────────────────────────────┐ ││
│  │  │ 提醒：XXX 群 XXX 号主已响应"在"，请及时安排任务               │ ││
│  │  └────────────────────────────────────────────────────────────┘ ││
│  │                                                                   ││
│  │  通知方式                                                         ││
│  │  ☑ 发送给售后人员本人                                            ││
│  │  ☑ 发送给售后工作群                                              ││
│  │  ☑ 推送到售后监控大屏                                            ││
│  │                                                                   ││
│  └─────────────────────────────────────────────────────────────────┘│
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────────┐│
│  │  任务配置                                                        ││
│  │                                                                   ││
│  │  任务超时时间（分钟）                                             ││
│  │  ┌─────┐                                                         ││
│  │  │ 10  │  ← 默认 10 分钟                                        ││
│  │  └─────┘                                                         ││
│  │                                                                   ││
│  │  响应关键词（逗号分隔）                                           ││
│  │  ┌────────────────────────────────────────────────────────────┐ ││
│  │  │ 在,好的,收到,马上                                           │ ││
│  │  └────────────────────────────────────────────────────────────┘ ││
│  │                                                                   ││
│  │  完成关键词（逗号分隔）                                           ││
│  │  ┌────────────────────────────────────────────────────────────┐ ││
│  │  │ 已完成,搞定,完成了                                           │ ││
│  │  └────────────────────────────────────────────────────────────┘ ││
│  │                                                                   ││
│  └─────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────┘
```

### 4.2 机器人安抚配置

**功能**:
- 配置不同状态下机器人的安抚消息
- 支持变量替换（用户名、群名等）
- 支持表情符号

**状态分类**:
1. **在线状态**: 售后人员在线，正常处理
2. **忙碌状态**: 售后人员忙碌，处理其他任务
3. **离线状态**: 售后人员离线，已通知

### 4.3 售后人员通知配置

**功能**:
- 配置通知消息模板
- 配置通知方式
- 支持变量替换

**通知方式**:
- 发送给售后人员本人
- 发送给售后工作群
- 推送到售后监控大屏

### 4.4 任务配置

**功能**:
- 配置任务超时时间
- 配置响应关键词
- 配置完成关键词

**关键词支持**:
- 支持逗号分隔多个关键词
- 支持正则表达式
- 支持模糊匹配

---

## 五、UI/UX 设计规范

### 5.1 色彩规范

**主色调**:
```css
--primary: #3b82f6;        /* 蓝色 */
--primary-hover: #2563eb;
--primary-active: #1d4ed8;
```

**状态色**:
```css
--success: #22c55e;        /* 绿色 - 成功 */
--warning: #f59e0b;        /* 黄色 - 警告 */
--error: #ef4444;          /* 红色 - 错误 */
--info: #3b82f6;           /* 蓝色 - 信息 */
```

**优先级色**:
```css
--critical: #dc2626;       /* 红色 - 紧急 */
--high: #f97316;           /* 橙色 - 高 */
--medium: #eab308;         /* 黄色 - 中 */
--low: #22c55e;            /* 绿色 - 低 */
```

**中性色**:
```css
--gray-50: #f9fafb;
--gray-100: #f3f4f6;
--gray-200: #e5e7eb;
--gray-300: #d1d5db;
--gray-400: #9ca3af;
--gray-500: #6b7280;
--gray-600: #4b5563;
--gray-700: #374151;
--gray-800: #1f2937;
--gray-900: #111827;
```

**背景色**:
```css
--bg-primary: #ffffff;
--bg-secondary: #f9fafb;
--bg-tertiary: #f3f4f6;
```

### 5.2 字体规范

**字体家族**:
```css
--font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
--font-mono: 'SF Mono', Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
```

**字体大小**:
```css
--text-xs: 0.75rem;    /* 12px */
--text-sm: 0.875rem;   /* 14px */
--text-base: 1rem;     /* 16px */
--text-lg: 1.125rem;   /* 18px */
--text-xl: 1.25rem;    /* 20px */
--text-2xl: 1.5rem;    /* 24px */
--text-3xl: 1.875rem;  /* 30px */
```

**字重**:
```css
--font-normal: 400;
--font-medium: 500;
--font-semibold: 600;
--font-bold: 700;
```

### 5.3 间距规范

```css
--spacing-xs: 0.25rem;  /* 4px */
--spacing-sm: 0.5rem;   /* 8px */
--spacing-md: 1rem;     /* 16px */
--spacing-lg: 1.5rem;   /* 24px */
--spacing-xl: 2rem;     /* 32px */
--spacing-2xl: 3rem;    /* 48px */
```

### 5.4 圆角规范

```css
--radius-sm: 0.25rem;   /* 4px */
--radius-md: 0.5rem;    /* 8px */
--radius-lg: 0.75rem;   /* 12px */
--radius-xl: 1rem;      /* 16px */
--radius-full: 9999px;
```

### 5.5 阴影规范

```css
--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
--shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
```

### 5.6 组件规范

**按钮**:
- Primary Button（主要按钮）
- Secondary Button（次要按钮）
- Outline Button（轮廓按钮）
- Ghost Button（幽灵按钮）
- Destructive Button（危险按钮）

**输入框**:
- Text Input（文本输入）
- Textarea（多行文本）
- Select（选择器）
- Checkbox（复选框）
- Radio（单选框）

**卡片**:
- Card（基础卡片）
- Card with Header（带头部卡片）
- Card with Footer（带底部卡片）

**表格**:
- Basic Table（基础表格）
- Sortable Table（可排序表格）
- Filterable Table（可筛选表格）

**标签**:
- Badge（基础标签）
- Status Badge（状态标签）
- Priority Badge（优先级标签）

### 5.7 响应式设计

**断点**:
```css
--breakpoint-sm: 640px;   /* 手机横屏 */
--breakpoint-md: 768px;   /* 平板 */
--breakpoint-lg: 1024px;  /* 小屏笔记本 */
--breakpoint-xl: 1280px;  /* 大屏笔记本 */
--breakpoint-2xl: 1536px; /* 超大屏 */
```

**响应式策略**:
- 移动优先（Mobile First）
- 使用 flexbox 和 grid 布局
- 使用相对单位（rem, em, %）
- 隐藏非关键内容在移动端

### 5.8 交互规范

**悬停效果**:
- 按钮悬停时改变背景色
- 卡片悬停时轻微上浮
- 链接悬停时显示下划线

**点击效果**:
- 按钮点击时轻微缩放
- 链接点击时显示活动状态

**加载状态**:
- 使用 Loading Spinner
- 使用 Skeleton Loading
- 使用 Progress Bar

**错误状态**:
- 显示错误提示
- 标记错误字段
- 提供重试按钮

**成功状态**:
- 显示成功提示
- 自动关闭提示
- 更新页面状态

---

## 总结

前端页面设计文档包含了流程引擎管理的完整页面设计，包括：

✅ **流程引擎管理页面**：流程列表、流程详情、跟踪任务列表
✅ **流程可视化编辑器**：拖拽式编辑、节点面板、属性面板
✅ **售后任务配置页面**：机器人安抚配置、通知配置、任务配置
✅ **UI/UX 设计规范**：色彩、字体、间距、圆角、阴影、组件、响应式

---

**文档结束**
