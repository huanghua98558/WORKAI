# WorkTool AI 中枢系统 - 系统设计报告（补充）

## 补充内容

### 16.5 告警通知时间间隔配置化设计

#### 16.5.1 告警通知时间间隔配置表

| 配置项 | 配置键 | 默认值 | 说明 | 可调节范围 |
|-------|-------|--------|------|-----------|
| 工作人员长时间未回复 | `alert_interval_staff_no_reply` | 30（分钟） | 工作人员收到消息后，超过N分钟未回复触发告警 | 5-120（分钟） |
| 号主不配合售后 | `alert_interval_user_uncooperative` | 60（分钟） | 售后@用户后，用户未在N分钟内响应触发告警 | 10-240（分钟） |
| 售后任务未完成 | `alert_interval_task_unfinished` | 1440（分钟） | 售后任务创建后，超过N分钟未完成触发告警 | 60-2880（分钟） |
| 售后任务未跟进 | `alert_interval_task_no_follow` | 3（分钟） | 用户响应后，售后未在N分钟内跟进触发告警 | 1-30（分钟） |

#### 16.5.2 告警通知时间间隔配置API

**获取告警通知时间间隔配置**

**接口路径：** `GET /api/alerts/config/intervals`

**返回参数：**

```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "alert_interval_staff_no_reply": 30,
    "alert_interval_user_uncooperative": 60,
    "alert_interval_task_unfinished": 1440,
    "alert_interval_task_no_follow": 3
  }
}
```

**更新告警通知时间间隔配置**

**接口路径：** `PUT /api/alerts/config/intervals`

**请求参数：**

```json
{
  "alert_interval_staff_no_reply": 30,
  "alert_interval_user_uncooperative": 60,
  "alert_interval_task_unfinished": 1440,
  "alert_interval_task_no_follow": 3
}
```

**返回参数：**

```json
{
  "code": 200,
  "message": "更新成功",
  "data": {
    "alert_interval_staff_no_reply": 30,
    "alert_interval_user_uncooperative": 60,
    "alert_interval_task_unfinished": 1440,
    "alert_interval_task_no_follow": 3
  }
}
```

#### 16.5.3 前端配置页面

**告警配置页 - 告警通知时间间隔配置**

```typescript
// 告警通知时间间隔配置表单
const AlertIntervalConfigForm = () => {
  const [config, setConfig] = useState({
    alert_interval_staff_no_reply: 30,
    alert_interval_user_uncooperative: 60,
    alert_interval_task_unfinished: 1440,
    alert_interval_task_no_follow: 3,
  });

  const handleSubmit = async () => {
    const response = await fetch('/api/alerts/config/intervals', {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(config),
    });
    const result = await response.json();
    if (result.code === 200) {
      toast.success('配置更新成功');
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <FormItem label="工作人员长时间未回复告警间隔（分钟）">
        <InputNumber
          min={5}
          max={120}
          value={config.alert_interval_staff_no_reply}
          onChange={(value) =>
            setConfig({ ...config, alert_interval_staff_no_reply: value })
          }
        />
      </FormItem>
      <FormItem label="号主不配合售后告警间隔（分钟）">
        <InputNumber
          min={10}
          max={240}
          value={config.alert_interval_user_uncooperative}
          onChange={(value) =>
            setConfig({ ...config, alert_interval_user_uncooperative: value })
          }
        />
      </FormItem>
      <FormItem label="售后任务未完成告警间隔（分钟）">
        <InputNumber
          min={60}
          max={2880}
          value={config.alert_interval_task_unfinished}
          onChange={(value) =>
            setConfig({ ...config, alert_interval_task_unfinished: value })
          }
        />
      </FormItem>
      <FormItem label="售后任务未跟进告警间隔（分钟）">
        <InputNumber
          min={1}
          max={30}
          value={config.alert_interval_task_no_follow}
          onChange={(value) =>
            setConfig({ ...config, alert_interval_task_no_follow: value })
          }
        />
      </FormItem>
      <Button type="primary" htmlType="submit">
        保存配置
      </Button>
    </form>
  );
};
```

---

### 16.6 AI Prompt 可配置系统设计

#### 16.6.1 AI Prompt 配置表

| 配置项 | 配置键 | 初始版本 | 说明 |
|-------|-------|---------|------|
| AI System Prompt | `ai_system_prompt` | （见下方） | AI的系统提示词 |
| AI 意图识别提示词 | `ai_intent_prompt` | （见下方） | AI意图识别的提示词 |
| AI 情感分析提示词 | `ai_sentiment_prompt` | （见下方） | AI情感分析的提示词 |
| AI 回复生成提示词 | `ai_reply_prompt` | （见下方） | AI回复生成的提示词 |
| AI 告警判断提示词 | `ai_alert_prompt` | （见下方） | AI告警判断的提示词 |
| AI 介入判断提示词 | `ai_intervention_prompt` | （见下方） | AI介入判断的提示词 |

#### 16.6.2 AI Prompt 初始版本

**AI System Prompt（初始版本）：**

```
你是一个智能客服助手，负责企业微信社群的自动回复和协同分析。

【你的角色】
你是一个专业的视频号运营服务商的智能客服助手，负责协助用户解决视频号运营和售后问题。

【你的职责】
1. 分析用户消息的意图和情感倾向
2. 判断是否需要回复
3. 生成合适的回复建议
4. 判断是否需要告警
5. 判断是否需要介入人工
6. 分析工作人员状态
7. 更新用户满意度评分

【你的原则】
1. 回复要友好、专业、简洁
2. 遇到无法解决的问题，及时通知工作人员
3. 保持中立，避免引起争议
4. 关注用户满意度，及时发现问题
5. 配合工作人员，提供良好的协同体验

【回复风格】
- 友好：使用亲切的语言，如"您好"、"请"
- 专业：使用准确的术语，避免口语化
- 简洁：避免冗余，直接回答问题
- 及时：快速响应，避免让用户等待

【注意事项】
- 避免承诺无法兑现的事情
- 避免使用过于负面的语言
- 避免泄露敏感信息
- 遵守法律法规和企业规章制度
```

**AI 意图识别提示词（初始版本）：**

```
请分析用户消息的意图，选择以下一个意图类型：

1. after_sales_scan_qrcode（售后扫码配合）：用户需要扫码配合视频号认证
2. after_sales_bind_phone（售后绑定手机号）：用户需要绑定手机号
3. after_sales_realname（售后实名认证）：用户需要进行实名认证
4. after_sales_selfie（售后自拍申诉）：用户需要发送自拍视频进行申诉
5. question_answer（疑虑解答）：用户对业务流程、运营模式、收益等有疑问
6. status_communication（状态沟通）：用户进行状态沟通，如收益分享
7. chat（闲聊）：用户进行闲聊，如打招呼
8. other（其他）：其他类型的意图

【判断标准】
- 如果消息中包含"扫码"、"认证"、"配合"等关键词，选择售后扫码配合
- 如果消息中包含"绑定"、"手机号"等关键词，选择售后绑定手机号
- 如果消息中包含"实名"、"认证"等关键词，选择售后实名认证
- 如果消息中包含"自拍"、"申诉"等关键词，选择售后自拍申诉
- 如果消息中包含"怎么"、"为什么"、"是什么"等疑问词，选择疑虑解答
- 如果消息中包含"收益"、"卖了多少钱"等状态沟通词汇，选择状态沟通
- 如果消息是简单的打招呼或无关紧要的内容，选择闲聊
- 如果无法判断，选择其他

请返回意图类型和置信度（0-1）。
```

**AI 情感分析提示词（初始版本）：**

```
请分析用户消息的情感倾向，选择以下一个情感类型：

1. positive（积极）：用户表达满意、感谢、认可等积极情绪
2. neutral（中性）：用户表达正常情绪，没有明显的积极或消极倾向
3. negative（消极）：用户表达不满、投诉、抱怨、质疑等消极情绪

【判断标准】
- 如果消息中包含"谢谢"、"很好"、"满意"等积极词汇，选择积极
- 如果消息中包含"不满"、"投诉"、"怎么这么慢"、"为什么还不行"等消极词汇，选择消极
- 如果消息中没有明显的积极或消极词汇，选择中性

请返回情感类型和置信度（0-1）。
```

**AI 回复生成提示词（初始版本）：**

```
请根据用户消息和上下文，生成合适的回复建议。

【回复要求】
1. 回复内容要友好、专业、简洁
2. 回复类型：group_at_user（群聊@用户）、private_chat（私聊）、group_no_at（群聊不@用户）
3. 如果是群聊回复，建议使用@用户功能，确保用户能看到
4. 如果是敏感问题或个人问题，建议使用私聊
5. 避免过于冗长，控制在200字以内

【回复示例】
- 扫码配合："您好，请点击下方链接进行扫码操作：[链接]"
- 绑定手机号："您好，请点击下方链接绑定手机号：[链接]"
- 实名认证："您好，请点击下方链接进行实名认证：[链接]"
- 自拍申诉："您好，请发送10条自拍视频，用于减少推荐申诉"
- 疑虑解答："您好，关于您的问题，我可以为您解答..."
- 状态沟通："您好，您的收益已更新，请查看"
- 闲聊："您好，有什么我可以帮助您的吗？"

请返回回复建议。
```

**AI 告警判断提示词（初始版本）：**

```
请判断是否需要告警，选择以下一个告警类型：

1. user_complaint（用户投诉）：用户投诉、表达强烈不满
2. operator_harsh（运营语气过硬）：运营（老板）语气过硬、引起配合度低
3. task_unfinished（售后任务未完成）：售后任务创建后，超过24小时未完成
4. staff_no_reply（工作人员长时间未回复）：工作人员收到消息后，超过30分钟未回复
5. user_uncooperative（号主不配合售后）：售后@用户后，用户未在1小时内响应
6. no_alert（无需告警）：不需要告警

【判断标准】
- 如果用户表达投诉、强烈不满，选择用户投诉
- 如果发送者是运营且情感消极，选择运营语气过硬
- 如果售后任务创建后，超过24小时未完成，选择售后任务未完成
- 如果工作人员收到消息后，超过30分钟未回复，选择工作人员长时间未回复
- 如果售后@用户后，用户未在1小时内响应，选择号主不配合售后
- 如果以上情况都不符合，选择无需告警

【告警等级】
- 用户投诉：P0（紧急）
- 运营语气过硬：P1（高优）
- 售后任务未完成：P2（普通）
- 工作人员长时间未回复：P2（普通）
- 号主不配合售后：P2（普通）

请返回是否需要告警、告警等级、告警类型。
```

**AI 介入判断提示词（初始版本）：**

```
请判断是否需要AI介入人工，选择以下一个介入场景：

1. staff_busy（人工繁忙）：工作人员状态 = 忙碌，AI介入辅助回复
2. night_shift（夜间人工离线）：当前时段 = 夜间（21:00-次日9:00），AI介入回复
3. user_negative（用户情感消极）：用户情感 = 消极，AI介入安抚用户
4. complex_problem（复杂问题需要AI辅助）：问题复杂度高，AI介入生成详细解答
5. operator_harsh（运营语气过硬）：发送者 = 运营且情感消极，AI介入安抚用户
6. no_intervention（无需介入）：不需要AI介入

【判断标准】
- 如果工作人员状态 = 忙碌，选择人工繁忙
- 如果当前时段 = 夜间（21:00-次日9:00），选择夜间人工离线
- 如果用户情感 = 消极，选择用户情感消极
- 如果问题复杂度高，选择复杂问题需要AI辅助
- 如果发送者 = 运营且情感消极，选择运营语气过硬
- 如果以上情况都不符合，选择无需介入

请返回是否需要AI介入、介入场景、介入原因。
```

#### 16.6.3 AI Prompt 配置API

**获取AI Prompt配置**

**接口路径：** `GET /api/ai/prompts`

**返回参数：**

```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "ai_system_prompt": "你是一个智能客服助手...",
    "ai_intent_prompt": "请分析用户消息的意图...",
    "ai_sentiment_prompt": "请分析用户消息的情感倾向...",
    "ai_reply_prompt": "请根据用户消息和上下文...",
    "ai_alert_prompt": "请判断是否需要告警...",
    "ai_intervention_prompt": "请判断是否需要AI介入..."
  }
}
```

**更新AI Prompt配置**

**接口路径：** `PUT /api/ai/prompts`

**请求参数：**

```json
{
  "ai_system_prompt": "你是一个智能客服助手...",
  "ai_intent_prompt": "请分析用户消息的意图...",
  "ai_sentiment_prompt": "请分析用户消息的情感倾向...",
  "ai_reply_prompt": "请根据用户消息和上下文...",
  "ai_alert_prompt": "请判断是否需要告警...",
  "ai_intervention_prompt": "请判断是否需要AI介入..."
}
```

**返回参数：**

```json
{
  "code": 200,
  "message": "更新成功",
  "data": {
    "ai_system_prompt": "你是一个智能客服助手...",
    "ai_intent_prompt": "请分析用户消息的意图...",
    "ai_sentiment_prompt": "请分析用户消息的情感倾向...",
    "ai_reply_prompt": "请根据用户消息和上下文...",
    "ai_alert_prompt": "请判断是否需要告警...",
    "ai_intervention_prompt": "请判断是否需要AI介入..."
  }
}
```

#### 16.6.4 前端配置页面

**AI配置页 - AI Prompt配置**

```typescript
// AI Prompt配置表单
const AIPromptConfigForm = () => {
  const [config, setConfig] = useState({
    ai_system_prompt: "",
    ai_intent_prompt: "",
    ai_sentiment_prompt: "",
    ai_reply_prompt: "",
    ai_alert_prompt: "",
    ai_intervention_prompt: "",
  });

  const fetchConfig = async () => {
    const response = await fetch('/api/ai/prompts');
    const result = await response.json();
    if (result.code === 200) {
      setConfig(result.data);
    }
  };

  const handleSubmit = async () => {
    const response = await fetch('/api/ai/prompts', {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(config),
    });
    const result = await response.json();
    if (result.code === 200) {
      toast.success('配置更新成功');
    }
  };

  useEffect(() => {
    fetchConfig();
  }, []);

  return (
    <form onSubmit={handleSubmit}>
      <FormItem label="AI System Prompt">
        <TextArea
          rows={10}
          value={config.ai_system_prompt}
          onChange={(e) =>
            setConfig({ ...config, ai_system_prompt: e.target.value })
          }
        />
      </FormItem>
      <FormItem label="AI 意图识别提示词">
        <TextArea
          rows={10}
          value={config.ai_intent_prompt}
          onChange={(e) =>
            setConfig({ ...config, ai_intent_prompt: e.target.value })
          }
        />
      </FormItem>
      <FormItem label="AI 情感分析提示词">
        <TextArea
          rows={10}
          value={config.ai_sentiment_prompt}
          onChange={(e) =>
            setConfig({ ...config, ai_sentiment_prompt: e.target.value })
          }
        />
      </FormItem>
      <FormItem label="AI 回复生成提示词">
        <TextArea
          rows={10}
          value={config.ai_reply_prompt}
          onChange={(e) =>
            setConfig({ ...config, ai_reply_prompt: e.target.value })
          }
        />
      </FormItem>
      <FormItem label="AI 告警判断提示词">
        <TextArea
          rows={10}
          value={config.ai_alert_prompt}
          onChange={(e) =>
            setConfig({ ...config, ai_alert_prompt: e.target.value })
          }
        />
      </FormItem>
      <FormItem label="AI 介入判断提示词">
        <TextArea
          rows={10}
          value={config.ai_intervention_prompt}
          onChange={(e) =>
            setConfig({ ...config, ai_intervention_prompt: e.target.value })
          }
        />
      </FormItem>
      <Button type="primary" htmlType="submit">
        保存配置
      </Button>
    </form>
  );
};
```

---

### 16.7 AI 介入场景可配置系统设计

#### 16.7.1 AI 介入场景配置表

| 配置项 | 配置键 | 初始值 | 说明 | 可调节 |
|-------|-------|--------|------|--------|
| 人工繁忙是否启用AI介入 | `ai_intervention_staff_busy_enabled` | true | 工作人员状态 = 忙碌时，AI是否介入 | 是 |
| 夜间人工离线是否启用AI介入 | `ai_intervention_night_shift_enabled` | true | 夜间（21:00-次日9:00），AI是否介入 | 是 |
| 用户情感消极是否启用AI介入 | `ai_intervention_user_negative_enabled` | true | 用户情感 = 消极时，AI是否介入 | 是 |
| 复杂问题是否启用AI介入 | `ai_intervention_complex_problem_enabled` | true | 问题复杂度高时，AI是否介入 | 是 |
| 运营语气过硬是否启用AI介入 | `ai_intervention_operator_harsh_enabled` | true | 运营语气过硬时，AI是否介入 | 是 |
| 人工繁忙AI介入条件 | `ai_intervention_staff_busy_condition` | staff.status == "busy" | 工作人员繁忙的条件 | 是 |
| 夜间人工离线时间段 | `ai_intervention_night_shift_time_range` | "21:00-09:00" | 夜间时间段 | 是 |
| 用户情感消极判断条件 | `ai_intervention_user_negative_condition` | sentiment == "negative" | 用户情感消极的条件 | 是 |
| 复杂问题判断条件 | `ai_intervention_complex_problem_condition` | intent in ["after_sales_scan_qrcode", "after_sales_bind_phone", "after_sales_realname", "after_sales_selfie"] | 复杂问题的条件 | 是 |
| 运营语气过硬判断条件 | `ai_intervention_operator_harsh_condition` | sender_type == "operator" && sentiment == "negative" | 运营语气过硬的条件 | 是 |

#### 16.7.2 AI 介入场景配置API

**获取AI介入场景配置**

**接口路径：** `GET /api/ai/interventions/config`

**返回参数：**

```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "ai_intervention_staff_busy_enabled": true,
    "ai_intervention_night_shift_enabled": true,
    "ai_intervention_user_negative_enabled": true,
    "ai_intervention_complex_problem_enabled": true,
    "ai_intervention_operator_harsh_enabled": true,
    "ai_intervention_staff_busy_condition": "staff.status == \"busy\"",
    "ai_intervention_night_shift_time_range": "21:00-09:00",
    "ai_intervention_user_negative_condition": "sentiment == \"negative\"",
    "ai_intervention_complex_problem_condition": "intent in [\"after_sales_scan_qrcode\", \"after_sales_bind_phone\", \"after_sales_realname\", \"after_sales_selfie\"]",
    "ai_intervention_operator_harsh_condition": "sender_type == \"operator\" && sentiment == \"negative\""
  }
}
```

**更新AI介入场景配置**

**接口路径：** `PUT /api/ai/interventions/config`

**请求参数：**

```json
{
  "ai_intervention_staff_busy_enabled": true,
  "ai_intervention_night_shift_enabled": true,
  "ai_intervention_user_negative_enabled": true,
  "ai_intervention_complex_problem_enabled": true,
  "ai_intervention_operator_harsh_enabled": true,
  "ai_intervention_staff_busy_condition": "staff.status == \"busy\"",
  "ai_intervention_night_shift_time_range": "21:00-09:00",
  "ai_intervention_user_negative_condition": "sentiment == \"negative\"",
  "ai_intervention_complex_problem_condition": "intent in [\"after_sales_scan_qrcode\", \"after_sales_bind_phone\", \"after_sales_realname\", \"after_sales_selfie\"]",
  "ai_intervention_operator_harsh_condition": "sender_type == \"operator\" && sentiment == \"negative\""
}
```

**返回参数：**

```json
{
  "code": 200,
  "message": "更新成功",
  "data": {
    "ai_intervention_staff_busy_enabled": true,
    "ai_intervention_night_shift_enabled": true,
    "ai_intervention_user_negative_enabled": true,
    "ai_intervention_complex_problem_enabled": true,
    "ai_intervention_operator_harsh_enabled": true,
    "ai_intervention_staff_busy_condition": "staff.status == \"busy\"",
    "ai_intervention_night_shift_time_range": "21:00-09:00",
    "ai_intervention_user_negative_condition": "sentiment == \"negative\"",
    "ai_intervention_complex_problem_condition": "intent in [\"after_sales_scan_qrcode\", \"after_sales_bind_phone\", \"after_sales_realname\", \"after_sales_selfie\"]",
    "ai_intervention_operator_harsh_condition": "sender_type == \"operator\" && sentiment == \"negative\""
  }
}
```

#### 16.7.3 前端配置页面

**AI配置页 - AI介入场景配置**

```typescript
// AI介入场景配置表单
const AIInterventionConfigForm = () => {
  const [config, setConfig] = useState({
    ai_intervention_staff_busy_enabled: true,
    ai_intervention_night_shift_enabled: true,
    ai_intervention_user_negative_enabled: true,
    ai_intervention_complex_problem_enabled: true,
    ai_intervention_operator_harsh_enabled: true,
    ai_intervention_staff_busy_condition: "staff.status == \"busy\"",
    ai_intervention_night_shift_time_range: "21:00-09:00",
    ai_intervention_user_negative_condition: "sentiment == \"negative\"",
    ai_intervention_complex_problem_condition: "intent in [\"after_sales_scan_qrcode\", \"after_sales_bind_phone\", \"after_sales_realname\", \"after_sales_selfie\"]",
    ai_intervention_operator_harsh_condition: "sender_type == \"operator\" && sentiment == \"negative\"",
  });

  const fetchConfig = async () => {
    const response = await fetch('/api/ai/interventions/config');
    const result = await response.json();
    if (result.code === 200) {
      setConfig(result.data);
    }
  };

  const handleSubmit = async () => {
    const response = await fetch('/api/ai/interventions/config', {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(config),
    });
    const result = await response.json();
    if (result.code === 200) {
      toast.success('配置更新成功');
    }
  };

  useEffect(() => {
    fetchConfig();
  }, []);

  return (
    <form onSubmit={handleSubmit}>
      <FormItem label="人工繁忙是否启用AI介入">
        <Switch
          checked={config.ai_intervention_staff_busy_enabled}
          onChange={(checked) =>
            setConfig({ ...config, ai_intervention_staff_busy_enabled: checked })
          }
        />
      </FormItem>
      <FormItem label="人工繁忙AI介入条件">
        <TextArea
          rows={3}
          value={config.ai_intervention_staff_busy_condition}
          onChange={(e) =>
            setConfig({ ...config, ai_intervention_staff_busy_condition: e.target.value })
          }
        />
      </FormItem>
      <FormItem label="夜间人工离线是否启用AI介入">
        <Switch
          checked={config.ai_intervention_night_shift_enabled}
          onChange={(checked) =>
            setConfig({ ...config, ai_intervention_night_shift_enabled: checked })
          }
        />
      </FormItem>
      <FormItem label="夜间人工离线时间段">
        <Input
          value={config.ai_intervention_night_shift_time_range}
          onChange={(e) =>
            setConfig({ ...config, ai_intervention_night_shift_time_range: e.target.value })
          }
        />
      </FormItem>
      <FormItem label="用户情感消极是否启用AI介入">
        <Switch
          checked={config.ai_intervention_user_negative_enabled}
          onChange={(checked) =>
            setConfig({ ...config, ai_intervention_user_negative_enabled: checked })
          }
        />
      </FormItem>
      <FormItem label="用户情感消极判断条件">
        <TextArea
          rows={3}
          value={config.ai_intervention_user_negative_condition}
          onChange={(e) =>
            setConfig({ ...config, ai_intervention_user_negative_condition: e.target.value })
          }
        />
      </FormItem>
      <FormItem label="复杂问题是否启用AI介入">
        <Switch
          checked={config.ai_intervention_complex_problem_enabled}
          onChange={(checked) =>
            setConfig({ ...config, ai_intervention_complex_problem_enabled: checked })
          }
        />
      </FormItem>
      <FormItem label="复杂问题判断条件">
        <TextArea
          rows={3}
          value={config.ai_intervention_complex_problem_condition}
          onChange={(e) =>
            setConfig({ ...config, ai_intervention_complex_problem_condition: e.target.value })
          }
        />
      </FormItem>
      <FormItem label="运营语气过硬是否启用AI介入">
        <Switch
          checked={config.ai_intervention_operator_harsh_enabled}
          onChange={(checked) =>
            setConfig({ ...config, ai_intervention_operator_harsh_enabled: checked })
          }
        />
      </FormItem>
      <FormItem label="运营语气过硬判断条件">
        <TextArea
          rows={3}
          value={config.ai_intervention_operator_harsh_condition}
          onChange={(e) =>
            setConfig({ ...config, ai_intervention_operator_harsh_condition: e.target.value })
          }
        />
      </FormItem>
      <Button type="primary" htmlType="submit">
        保存配置
      </Button>
    </form>
  );
};
```

---

### 16.8 AI介入场景灵活调整示例

#### 16.8.1 示例1：关闭夜间人工离线的AI介入

**场景：**
- 夜间人工离线时，不需要AI介入，因为夜间可以由机器人自动回复

**配置调整：**
```json
{
  "ai_intervention_night_shift_enabled": false
}
```

#### 16.8.2 示例2：调整复杂问题的判断条件

**场景：**
- 只需要售后扫码配合和售后实名认证的问题才需要AI介入
- 售后绑定手机号和售后自拍申诉的问题不需要AI介入

**配置调整：**
```json
{
  "ai_intervention_complex_problem_condition": "intent in [\"after_sales_scan_qrcode\", \"after_sales_realname\"]"
}
```

#### 16.8.3 示例3：调整夜间人工离线时间段

**场景：**
- 夜间人工离线时间段调整为22:00-次日8:00

**配置调整：**
```json
{
  "ai_intervention_night_shift_time_range": "22:00-08:00"
}
```

#### 16.8.4 示例4：添加新的AI介入场景

**场景：**
- 添加"用户连续3次不满意时AI介入"的场景

**配置调整：**
```json
{
  "ai_intervention_user_continuous_dissatisfaction_enabled": true,
  "ai_intervention_user_continuous_dissatisfaction_condition": "user_satisfaction < 50 && continuous_dissatisfaction_count >= 3"
}
```

---

### 16.9 更新需要确认的事项列表

#### 已确认事项（8项）

1. ✅ 告警通知的时间间隔可以自由设置 - 已设计配置化系统
2. ✅ 告警等级提升策略合理 - 保持当前设计
3. ✅ 告警取消规则不需要补充 - 保持当前设计
4. ✅ 统一AI的方案可行 - 继续使用统一AI
5. ✅ AI Prompt需要优化，设置为可调节 - 已设计可配置系统
6. ✅ 上下文检索数量（10-30条）是合理的 - 保持当前设计
7. ✅ AI介入场景最好灵活，能依据实际情况调整 - 已设计可配置系统
8. ✅ 机器人角色体系合理 - 保持当前设计

#### 待确认事项（7项）

9. ⏳ 机器人选择规则是否合理？
10. ⏳ 回复延迟设置是否合理？
11. ⏳ 售后任务表与腾讯文档的对接细节是否需要进一步确认？
12. ⏳ 前端页面设计是否符合需求？
13. ⏳ 协同分析板块是否还有其他需要的功能？
14. ⏳ 还有哪些需要完善的地方？
15. ⏳ 数据库表结构是否需要调整？

---

**文档版本：** v1.1

**最后更新：** 2024-01-01

**文档作者：** WorkTool AI 团队
