{
  "id": "flow_community_analysis_v6_1",
  "name": "ç¤¾ç¾¤æ•°æ®åˆ†æç³»ç»Ÿæµç¨‹",
  "description": "åˆ†æç¤¾ç¾¤è¿è¥æ•°æ®ï¼Œç”Ÿæˆæ”¹è¿›å»ºè®®æŠ¥å‘Šï¼ˆå®æ—¶æŠ¥å‘Šã€æ¯æ—¥æŠ¥å‘Šã€å‘¨æŠ¥ã€æœˆæŠ¥ï¼‰",
  "version": "6.1.0",
  "isDefault": true,
  "priority": 80,
  "category": "åˆ†ææµç¨‹",
  "tags": ["æ•°æ®åˆ†æ", "ç¤¾ç¾¤è¿è¥", "æŠ¥å‘Šç”Ÿæˆ"],
  "triggerType": "scheduled",
  "triggerConfig": {
    "eventType": "scheduled",
    "cronExpression": "0 */10 * * *",
    "method": "POST"
  },
  "nodes": [
    {
      "id": "node_start",
      "type": "start",
      "name": "å¼€å§‹",
      "position": { "x": 50, "y": 100 },
      "data": {
        "name": "å¼€å§‹",
        "description": "æµç¨‹å¼€å§‹",
        "icon": "â–¶ï¸",
        "color": "bg-green-500"
      }
    },
    {
      "id": "node_user_activity_analysis",
      "type": "multi_task_analysis",
      "name": "ç”¨æˆ·æ´»è·ƒåº¦åˆ†æ",
      "position": { "x": 250, "y": 50 },
      "data": {
        "name": "ç”¨æˆ·æ´»è·ƒåº¦åˆ†æ",
        "description": "åˆ†ææ¯æ—¥æ´»è·ƒç”¨æˆ·æ•°ã€ç”¨æˆ·å‘è¨€é¢‘ç‡ã€ç”¨æˆ·ç•™å­˜ç‡ã€ç”¨æˆ·æµå¤±ç‡",
        "icon": "ğŸ“Š",
        "color": "bg-teal-500",
        "config": {
          "executeMode": "parallel",
          "failFast": false,
          "tasks": [
            {
              "id": "task_daily_active_users",
              "operation": "collaboration_analyze",
              "config": {
                "analysisType": "daily_active_users",
                "outputField": "dailyActiveUsers"
              }
            },
            {
              "id": "task_message_frequency",
              "operation": "collaboration_analyze",
              "config": {
                "analysisType": "message_frequency",
                "outputField": "messageFrequency"
              }
            },
            {
              "id": "task_retention_rate",
              "operation": "collaboration_analyze",
              "config": {
                "analysisType": "retention_rate",
                "outputField": "retentionRate"
              }
            },
            {
              "id": "task_churn_rate",
              "operation": "collaboration_analyze",
              "config": {
                "analysisType": "churn_rate",
                "outputField": "churnRate"
              }
            }
          ]
        }
      }
    },
    {
      "id": "node_message_type_analysis",
      "type": "multi_task_data",
      "name": "æ¶ˆæ¯ç±»å‹åˆ†æ",
      "position": { "x": 250, "y": 200 },
      "data": {
        "name": "æ¶ˆæ¯ç±»å‹åˆ†æ",
        "description": "åˆ†ææ–‡æœ¬æ¶ˆæ¯å æ¯”ã€å›¾ç‰‡æ¶ˆæ¯å æ¯”ã€è§†é¢‘æ¶ˆæ¯å æ¯”ã€éŸ³é¢‘æ¶ˆæ¯å æ¯”",
        "icon": "ğŸ—„ï¸",
        "color": "bg-blue-500",
        "config": {
          "executeMode": "parallel",
          "failFast": false,
          "tasks": [
            {
              "id": "task_text_message_ratio",
              "operation": "query",
              "config": {
                "queryType": "message_type_ratio",
                "messageType": "text",
                "outputField": "textMessageRatio"
              }
            },
            {
              "id": "task_image_message_ratio",
              "operation": "query",
              "config": {
                "queryType": "message_type_ratio",
                "messageType": "image",
                "outputField": "imageMessageRatio"
              }
            },
            {
              "id": "task_video_message_ratio",
              "operation": "query",
              "config": {
                "queryType": "message_type_ratio",
                "messageType": "video",
                "outputField": "videoMessageRatio"
              }
            },
            {
              "id": "task_audio_message_ratio",
              "operation": "query",
              "config": {
                "queryType": "message_type_ratio",
                "messageType": "audio",
                "outputField": "audioMessageRatio"
              }
            }
          ]
        }
      }
    },
    {
      "id": "node_intent_analysis",
      "type": "multi_task_ai",
      "name": "æ„å›¾åˆ†æ",
      "position": { "x": 450, "y": 100 },
      "data": {
        "name": "æ„å›¾åˆ†æ",
        "description": "åˆ†æç”¨æˆ·æ¶ˆæ¯æ„å›¾ï¼ˆå”®åç±»ã€ç–‘è™‘è§£ç­”ç±»ã€æƒ…ç»ªä¸æ»¡ç±»ã€çŠ¶æ€æ²Ÿé€šç±»ã€é—²èŠç±»ï¼‰",
        "icon": "ğŸ§ ",
        "color": "bg-purple-500",
        "config": {
          "executeMode": "parallel",
          "failFast": false,
          "tasks": [
            {
              "id": "task_after_sales_intent",
              "operation": "intent_analyze",
              "config": {
                "intentType": "å”®åç±»",
                "subIntents": ["æ‰«ç ", "ç»‘å®š", "è®¤è¯"],
                "outputField": "afterSalesIntent"
              }
            },
            {
              "id": "task_question_intent",
              "operation": "intent_analyze",
              "config": {
                "intentType": "ç–‘è™‘è§£ç­”ç±»",
                "subIntents": ["ä»·æ ¼", "åŠŸèƒ½", "å”®å"],
                "outputField": "questionIntent"
              }
            },
            {
              "id": "task_emotion_intent",
              "operation": "intent_analyze",
              "config": {
                "intentType": "æƒ…ç»ªä¸æ»¡ç±»",
                "subIntents": ["æŠ•è¯‰", "æŠ±æ€¨", "ä¸æ»¡"],
                "outputField": "emotionIntent"
              }
            },
            {
              "id": "task_status_intent",
              "operation": "intent_analyze",
              "config": {
                "intentType": "çŠ¶æ€æ²Ÿé€šç±»",
                "subIntents": ["è¿›åº¦", "çŠ¶æ€", "ç¡®è®¤"],
                "outputField": "statusIntent"
              }
            },
            {
              "id": "task_chat_intent",
              "operation": "intent_analyze",
              "config": {
                "intentType": "é—²èŠç±»",
                "outputField": "chatIntent"
              }
            }
          ]
        }
      }
    },
    {
      "id": "node_staff_analysis",
      "type": "multi_task_analysis",
      "name": "å·¥ä½œäººå‘˜åˆ†æ",
      "position": { "x": 650, "y": 50 },
      "data": {
        "name": "å·¥ä½œäººå‘˜åˆ†æ",
        "description": "åˆ†æç¾¤åŠ©ç†æ´»è·ƒåº¦ã€å”®åå·¥ä½œæ•ˆç‡ã€ç”¨æˆ·æ»¡æ„åº¦è¯„åˆ†ã€é—®é¢˜è§£å†³ç‡",
        "icon": "ğŸ“Š",
        "color": "bg-teal-500",
        "config": {
          "executeMode": "parallel",
          "failFast": false,
          "tasks": [
            {
              "id": "task_assistant_activity",
              "operation": "collaboration_analyze",
              "config": {
                "analysisType": "assistant_activity",
                "outputField": "assistantActivity"
              }
            },
            {
              "id": "task_after_sales_efficiency",
              "operation": "collaboration_analyze",
              "config": {
                "analysisType": "after_sales_efficiency",
                "outputField": "afterSalesEfficiency"
              }
            },
            {
              "id": "task_user_satisfaction_score",
              "operation": "satisfaction_infer",
              "config": {
                "analysisType": "user_satisfaction_score",
                "outputField": "userSatisfactionScore"
              }
            },
            {
              "id": "task_problem_resolution_rate",
              "operation": "collaboration_analyze",
              "config": {
                "analysisType": "problem_resolution_rate",
                "outputField": "problemResolutionRate"
              }
            }
          ]
        }
      }
    },
    {
      "id": "node_robot_analysis",
      "type": "multi_task_robot",
      "name": "æœºå™¨äººåˆ†æ",
      "position": { "x": 650, "y": 200 },
      "data": {
        "name": "æœºå™¨äººåˆ†æ",
        "description": "åˆ†ææœºå™¨äººå›å¤ç‡ã€å“åº”æ—¶é—´ã€è´Ÿè½½æƒ…å†µã€æ•…éšœç‡",
        "icon": "ğŸ¤–",
        "color": "bg-blue-600",
        "config": {
          "executeMode": "parallel",
          "failFast": false,
          "tasks": [
            {
              "id": "task_robot_reply_rate",
              "operation": "dispatch",
              "config": {
                "analysisType": "reply_rate",
                "outputField": "robotReplyRate"
              }
            },
            {
              "id": "task_robot_response_time",
              "operation": "response_time_check",
              "config": {
                "checkType": "average",
                "timeWindow": 3600,
                "outputField": "robotResponseTime"
              }
            },
            {
              "id": "task_robot_workload",
              "operation": "workload_check",
              "config": {
                "checkType": "current",
                "outputField": "robotWorkload"
              }
            },
            {
              "id": "task_robot_failure_rate",
              "operation": "dispatch",
              "config": {
                "analysisType": "failure_rate",
                "timeWindow": 86400,
                "outputField": "robotFailureRate"
              }
            }
          ]
        }
      }
    },
    {
      "id": "node_operator_analysis",
      "type": "multi_task_staff",
      "name": "è¿è¥åˆ†æ",
      "position": { "x": 850, "y": 100 },
      "data": {
        "name": "è¿è¥åˆ†æ",
        "description": "åˆ†æè¿è¥å‘è¨€é¢‘ç‡ã€è¯­æ°”åˆ†æã€å·ä¸»é…åˆåº¦ã€å»ºè®®é‡‡çº³ç‡",
        "icon": "ğŸ‘¥",
        "color": "bg-pink-500",
        "config": {
          "executeMode": "parallel",
          "failFast": false,
          "tasks": [
            {
              "id": "task_operator_frequency",
              "operation": "notify",
              "config": {
                "analysisType": "message_frequency",
                "userType": "operator",
                "outputField": "operatorFrequency"
              }
            },
            {
              "id": "task_operator_tone",
              "operation": "emotion_analyze",
              "config": {
                "analysisType": "operator_tone",
                "outputField": "operatorTone"
              }
            },
            {
              "id": "task_owner_cooperation",
              "operation": "collaboration_analyze",
              "config": {
                "analysisType": "owner_cooperation",
                "outputField": "ownerCooperation"
              }
            },
            {
              "id": "task_suggestion_adoption_rate",
              "operation": "collaboration_analyze",
              "config": {
                "analysisType": "suggestion_adoption_rate",
                "outputField": "suggestionAdoptionRate"
              }
            }
          ]
        }
      }
    },
    {
      "id": "node_report_generation",
      "type": "multi_task_data",
      "name": "æŠ¥å‘Šç”Ÿæˆ",
      "position": { "x": 1050, "y": 100 },
      "data": {
        "name": "æŠ¥å‘Šç”Ÿæˆ",
        "description": "ç”Ÿæˆåˆ†ææŠ¥å‘Šï¼ˆå®æ—¶æŠ¥å‘Šã€æ¯æ—¥æŠ¥å‘Šã€å‘¨æŠ¥ã€æœˆæŠ¥ï¼‰",
        "icon": "ğŸ—„ï¸",
        "color": "bg-blue-500",
        "config": {
          "executeMode": "sequential",
          "failFast": false,
          "tasks": [
            {
              "id": "task_aggregate_data",
              "operation": "transform",
              "config": {
                "transformType": "aggregate_analysis_data",
                "dataFields": [
                  "dailyActiveUsers",
                  "messageFrequency",
                  "retentionRate",
                  "churnRate",
                  "textMessageRatio",
                  "imageMessageRatio",
                  "videoMessageRatio",
                  "audioMessageRatio",
                  "afterSalesIntent",
                  "questionIntent",
                  "emotionIntent",
                  "statusIntent",
                  "chatIntent",
                  "assistantActivity",
                  "afterSalesEfficiency",
                  "userSatisfactionScore",
                  "problemResolutionRate",
                  "robotReplyRate",
                  "robotResponseTime",
                  "robotWorkload",
                  "robotFailureRate",
                  "operatorFrequency",
                  "operatorTone",
                  "ownerCooperation",
                  "suggestionAdoptionRate"
                ],
                "outputField": "aggregatedData"
              }
            },
            {
              "id": "task_determine_report_type",
              "operation": "query",
              "config": {
                "queryType": "report_type_determine",
                "currentTime": "{{currentTime}}",
                "outputField": "reportType"
              }
            },
            {
              "id": "task_generate_report",
              "operation": "transform",
              "config": {
                "transformType": "generate_report",
                "reportTypeField": "reportType",
                "dataField": "aggregatedData",
                "outputField": "generatedReport"
              }
            },
            {
              "id": "task_save_report",
              "operation": "dispatch",
              "config": {
                "action": "save",
                "table": "analysis_reports",
                "dataField": "generatedReport",
                "outputField": "savedReportId"
              }
            }
          ]
        }
      }
    },
    {
      "id": "node_improvement_suggestions",
      "type": "multi_task_ai",
      "name": "ç”Ÿæˆæ”¹è¿›å»ºè®®",
      "position": { "x": 1250, "y": 100 },
      "data": {
        "name": "ç”Ÿæˆæ”¹è¿›å»ºè®®",
        "description": "åŸºäºåˆ†ææ•°æ®ç”Ÿæˆæ”¹è¿›å»ºè®®æŠ¥å‘Š",
        "icon": "ğŸ§ ",
        "color": "bg-purple-500",
        "config": {
          "executeMode": "sequential",
          "failFast": false,
          "tasks": [
            {
              "id": "task_analyze_trends",
              "operation": "unified_analyze",
              "config": {
                "modelId": "default",
                "analysisType": "trend_analysis",
                "dataField": "aggregatedData",
                "outputField": "trendAnalysis"
              }
            },
            {
              "id": "task_generate_suggestions",
              "operation": "unified_analyze",
              "config": {
                "modelId": "default",
                "analysisType": "suggestion_generation",
                "dataField": "aggregatedData",
                "trendAnalysisField": "trendAnalysis",
                "outputField": "improvementSuggestions"
              }
            },
            {
              "id": "task_save_suggestions",
              "operation": "dispatch",
              "config": {
                "action": "save",
                "table": "improvement_suggestions",
                "dataField": "improvementSuggestions",
                "reportIdField": "savedReportId",
                "outputField": "savedSuggestionsId"
              }
            }
          ]
        }
      }
    },
    {
      "id": "node_push_dashboard",
      "type": "multi_task_message",
      "name": "æ¨é€Dashboard",
      "position": { "x": 1450, "y": 100 },
      "data": {
        "name": "æ¨é€Dashboard",
        "description": "æ¨é€åˆ†ææŠ¥å‘Šå’Œæ”¹è¿›å»ºè®®åˆ°Dashboard",
        "icon": "ğŸ“¨",
        "color": "bg-green-500",
        "config": {
          "executeMode": "parallel",
          "failFast": false,
          "tasks": [
            {
              "id": "task_push_to_analytics_dashboard",
              "operation": "dispatch",
              "config": {
                "target": "analytics_dashboard",
                "data": {
                  "report": "{{generatedReport}}",
                  "suggestions": "{{improvementSuggestions}}"
                }
              }
            },
            {
              "id": "task_push_to_staff_dashboard",
              "operation": "dispatch",
              "config": {
                "target": "staff_dashboard",
                "data": {
                  "report": "{{generatedReport}}",
                  "suggestions": "{{improvementSuggestions}}"
                }
              }
            }
          ]
        }
      }
    },
    {
      "id": "node_end",
      "type": "end",
      "name": "ç»“æŸ",
      "position": { "x": 1650, "y": 100 },
      "data": {
        "name": "ç»“æŸ",
        "description": "æµç¨‹ç»“æŸ",
        "icon": "â¹ï¸",
        "color": "bg-gray-500"
      }
    }
  ],
  "edges": [
    {
      "id": "edge_start_user_activity",
      "source": "node_start",
      "target": "node_user_activity_analysis",
      "type": "bezier"
    },
    {
      "id": "edge_start_message_type",
      "source": "node_start",
      "target": "node_message_type_analysis",
      "type": "bezier"
    },
    {
      "id": "edge_user_activity_intent",
      "source": "node_user_activity_analysis",
      "target": "node_intent_analysis",
      "type": "bezier"
    },
    {
      "id": "edge_message_type_intent",
      "source": "node_message_type_analysis",
      "target": "node_intent_analysis",
      "type": "bezier"
    },
    {
      "id": "edge_intent_staff",
      "source": "node_intent_analysis",
      "target": "node_staff_analysis",
      "type": "bezier"
    },
    {
      "id": "edge_intent_robot",
      "source": "node_intent_analysis",
      "target": "node_robot_analysis",
      "type": "bezier"
    },
    {
      "id": "edge_staff_operator",
      "source": "node_staff_analysis",
      "target": "node_operator_analysis",
      "type": "bezier"
    },
    {
      "id": "edge_robot_operator",
      "source": "node_robot_analysis",
      "target": "node_operator_analysis",
      "type": "bezier"
    },
    {
      "id": "edge_operator_report",
      "source": "node_operator_analysis",
      "target": "node_report_generation",
      "type": "bezier"
    },
    {
      "id": "edge_report_suggestions",
      "source": "node_report_generation",
      "target": "node_improvement_suggestions",
      "type": "bezier"
    },
    {
      "id": "edge_suggestions_push",
      "source": "node_improvement_suggestions",
      "target": "node_push_dashboard",
      "type": "bezier"
    },
    {
      "id": "edge_push_end",
      "source": "node_push_dashboard",
      "target": "node_end",
      "type": "bezier"
    }
  ],
  "variables": {
    "currentTime": "",
    "dailyActiveUsers": 0,
    "messageFrequency": {},
    "retentionRate": 0,
    "churnRate": 0,
    "textMessageRatio": 0,
    "imageMessageRatio": 0,
    "videoMessageRatio": 0,
    "audioMessageRatio": 0,
    "afterSalesIntent": {},
    "questionIntent": {},
    "emotionIntent": {},
    "statusIntent": {},
    "chatIntent": {},
    "assistantActivity": {},
    "afterSalesEfficiency": {},
    "userSatisfactionScore": 0,
    "problemResolutionRate": 0,
    "robotReplyRate": 0,
    "robotResponseTime": 0,
    "robotWorkload": 0,
    "robotFailureRate": 0,
    "operatorFrequency": 0,
    "operatorTone": "",
    "ownerCooperation": 0,
    "suggestionAdoptionRate": 0,
    "aggregatedData": {},
    "reportType": "realtime",
    "generatedReport": {},
    "savedReportId": "",
    "trendAnalysis": {},
    "improvementSuggestions": {},
    "savedSuggestionsId": ""
  },
  "timeout": 300000,
  "retryConfig": {
    "maxRetries": 2,
    "retryInterval": 5000
  }
}
