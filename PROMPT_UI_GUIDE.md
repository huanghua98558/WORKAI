# AI服务提示词UI配置指南

## 📋 概述

AI服务配置界面现已添加提示词显示和编辑功能，允许用户查看和自定义每个AI服务的系统提示词。

---

## 🎨 UI界面说明

### 位置
**路径：** 设置 → AI配置管理 → AI模型标签页

### 显示方式

每个AI服务配置卡片（意图识别、服务回复、转化客服）现在都包含：

#### 1. 模型选择区域
- 选择内置模型或微调模型
- 查看模型详情和性能指标

#### 2. 提示词配置区域（新增）
```
┌─────────────────────────────────────────────────┐
│ 🧠 系统提示词                    [使用默认提示词]│
├─────────────────────────────────────────────────┤
│ ℹ️ 系统提示词定义了AI的行为和角色。留空则使用     │
│    经过优化的默认提示词。                        │
├─────────────────────────────────────────────────┤
│ 自定义提示词（留空使用默认）              [恢复默认]│
│ ┌─────────────────────────────────────────────┐ │
│ │                                             │ │
│ │  留空使用系统默认提示词...                   │ │
│ │                                             │ │
│ │                                             │ │
│ │                                             │ │
│ └─────────────────────────────────────────────┘ │
│ ✅ 已配置自定义提示词 • 1234 字符              │
└─────────────────────────────────────────────────┘
```

---

## 🔧 功能说明

### 1. 查看提示词状态

#### 使用默认提示词
当提示词字段为空时：
- 显示绿色标签："使用默认提示词"
- 输入框显示占位符："留空使用系统默认提示词..."

#### 使用自定义提示词
当输入框有内容时：
- 显示"恢复默认"按钮
- 显示字符数统计
- 显示"✅ 已配置自定义提示词"提示

---

### 2. 编辑提示词

#### 查看当前提示词
1. 进入"设置 → AI配置管理"
2. 选择"AI模型"标签
3. 查看对应服务配置卡片
4. 在"系统提示词"区域查看当前提示词

#### 自定义提示词
1. 在提示词输入框中输入自定义内容
2. 系统自动保存（需点击页面顶部的"保存配置"按钮）
3. 显示字符数统计

#### 恢复默认提示词
1. 点击"恢复默认"按钮
2. 输入框内容清空
3. 显示"使用默认提示词"标签

---

### 3. 保存配置

**重要：** 修改提示词后，必须点击页面顶部的"保存配置"按钮才会生效！

```
┌─────────────────────────────────────────────────┐
│ 🔄 刷新         💾 保存配置                      │
└─────────────────────────────────────────────────┘
```

---

## 📊 提示词对比

### 默认提示词 vs 自定义提示词

| 特性 | 默认提示词 | 自定义提示词 |
|------|-----------|-------------|
| 优势 | ✅ 专业优化<br>✅ 经过测试<br>✅ 持续更新 | ✅ 个性化定制<br>✅ 特定场景优化 |
| 劣势 | ❌ 不够灵活 | ❌ 需要自己测试<br>❌ 可能影响效果 |
| 适用 | 通用场景 | 特殊需求场景 |

---

## 🎯 使用场景

### 适合使用默认提示词

✅ **推荐使用默认提示词的情况：**
- 标准客服场景
- 通用对话场景
- 不熟悉提示词工程的用户
- 需要稳定可靠的表现

### 适合自定义提示词

✅ **需要自定义提示词的情况：**
- 特定行业要求（医疗、法律等）
- 特定品牌风格
- 特殊对话流程
- A/B测试不同话术

---

## 📝 提示词编写建议

### 1. 意图识别提示词

**要点：**
- 明确定义意图类型
- 提供判断标准和特征关键词
- 设置信信度评估标准
- 规定严格的输出格式

**示例：**
```markdown
# 意图识别专家

识别以下意图类型：
- chat: 闲聊
- service: 服务咨询
- help: 帮助请求

返回JSON格式：
{
  "intent": "类型",
  "needReply": true/false,
  "confidence": 0.0-1.0,
  "reason": "判断理由"
}
```

### 2. 服务回复提示词

**要点：**
- 明确角色定位
- 设定回复风格
- 规定长度限制
- 提供回复示例

**示例：**
```markdown
# 客服助手

回复要求：
1. 语气专业友好
2. 简洁明了（200字以内）
3. 适度使用表情符号
4. 避免敏感词汇
```

### 3. 转化客服提示词

**要点：**
- 定义转化目标
- 设计对话流程
- 提供话术模板
- 强调信任建立

**示例：**
```markdown
# 转化专员

对话策略：
1. 建立信任
2. 挖掘需求
3. 展示价值
4. 引导行动

转化目标：引导用户购买/注册/咨询
```

### 4. 报告生成提示词

**要点：**
- 定义报告结构
- 设定分析原则
- 提供模板格式
- 强调可执行性

**示例：**
```markdown
# 数据分析专家

报告结构：
1. 概述
2. 关键指标
3. 数据分析
4. 洞察和建议
5. 下一步行动
```

---

## ⚠️ 注意事项

### 1. 提示词长度
- ⚠️ 过短：指令不明确，AI理解偏差
- ⚠️ 过长：增加成本，可能降低效果
- ✅ 建议：200-2000字符

### 2. 测试验证
- ✅ 自定义提示词后务必测试
- ✅ 使用不同场景验证效果
- ✅ 比较与默认提示词的差异

### 3. 版本管理
- ✅ 保存提示词的原始版本
- ✅ 记录修改日期和原因
- ✅ 便于回滚和对比

### 4. 保存配置
- ⚠️ 修改后必须点击"保存配置"
- ⚠️ 否则修改不会生效
- ✅ 保存后会显示成功提示

---

## 🔍 故障排查

### 问题1：修改提示词后没有生效

**原因：** 没有点击"保存配置"按钮

**解决：** 点击页面顶部的"保存配置"按钮

---

### 问题2：提示词显示不完整

**原因：** 提示词过长，超出显示范围

**解决：** 点击输入框滚动查看完整内容

---

### 问题3：恢复默认后仍显示自定义提示词

**原因：** 浏览器缓存问题

**解决：** 刷新页面（F5）重新加载

---

### 问题4：保存后提示词又恢复为默认

**原因：** 后端保存失败

**解决：**
1. 检查网络连接
2. 查看浏览器控制台错误信息
3. 联系技术支持

---

## 📚 相关文档

- **`PROMPT_GUIDE.md`** - 完整的提示词设计指南
- **`server/config/default-prompts.js`** - 默认提示词源码
- **`test-prompts.js`** - 提示词测试脚本

---

## 🆘 获取帮助

如有问题，请：
1. 查看 `PROMPT_GUIDE.md` 文档
2. 检查浏览器控制台错误信息
3. 联系技术支持团队

---

## 📝 更新日志

### v1.0.0 (2024-02-04)
- ✅ 新增提示词显示功能
- ✅ 新增提示词编辑功能
- ✅ 新增默认/自定义状态标识
- ✅ 新增字符数统计
- ✅ 新增恢复默认按钮
