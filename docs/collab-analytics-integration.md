# ååŒåˆ†ææ¨¡å— - è·¨æ¿å—é…åˆéœ€æ±‚æ–‡æ¡£

## ä¸€ã€ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä¸»ç³»ç»Ÿæ¶æ„                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  æœºå™¨äººç®¡ç†   â”‚â”€â”€â”€â†’â”‚  ä¸šåŠ¡è§’è‰²ç®¡ç† â”‚â”€â”€â”€â†’â”‚  ååŒåˆ†æ    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â†“                    â†“                    â†“             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  æŒ‡ä»¤å‘é€    â”‚â”€â”€â”€â†’â”‚  å·¥ä½œäººå‘˜ç®¡ç† â”‚â”€â”€â”€â†’â”‚  ç›‘æ§å¤§å±    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## äºŒã€å„æ¿å—é…åˆéœ€æ±‚

### 2.1 æœºå™¨äººç®¡ç†æ¿å— â­â­â­â­â­

#### æä¾›çš„å†…å®¹
- **æœºå™¨äººåˆ—è¡¨**ï¼šid, name, robotId, status
- **æœºå™¨äººçŠ¶æ€**ï¼šonline/offline/maintenance
- **æœºå™¨äººåˆ†ç»„**ï¼šgroup_name

#### ååŒåˆ†æéœ€è¦çš„æ•°æ®
```typescript
{
  robot_id: string;
  robot_name: string;
  robot_status: string;
  group_name?: string;
  business_roles: Array<{id, name, code}>; // å·²ç»‘å®š
}
```

#### é…åˆæ–¹å¼
1. **è¯»å–é…åˆ**ï¼šä»æœºå™¨äººç®¡ç†è·å–æœºå™¨äººåˆ—è¡¨
   - API: `GET /api/admin/robots`
   - ç”¨äºï¼šæŒ‰æœºå™¨äººç­›é€‰ã€åˆ†ææœºå™¨äººæ•ˆèƒ½

2. **çŠ¶æ€åŒæ­¥**ï¼šå®æ—¶æ›´æ–°æœºå™¨äººåœ¨çº¿çŠ¶æ€
   - WebSocket æˆ–å®šæ—¶è½®è¯¢
   - ç”¨äºï¼šè®¡ç®—åœ¨çº¿æœºå™¨äººçš„ååŒç‡

#### å…³é”®è”åŠ¨ç‚¹
- âœ… `robot_id` - å…³è”ä¸šåŠ¡è§’è‰²
- âœ… `robot_status` - å½±å“ååŒç‡ç»Ÿè®¡
- âœ… `business_roles` - æ˜¾ç¤ºç»‘å®šçš„ä¸šåŠ¡è§’è‰²

---

### 2.2 ä¸šåŠ¡è§’è‰²ç®¡ç†æ¿å— â­â­â­â­â­ï¼ˆæ ¸å¿ƒï¼‰

#### æä¾›çš„å†…å®¹
- **è§’è‰²å®šä¹‰**ï¼šid, name, code, description
- **AIè¡Œä¸ºé…ç½®**ï¼šaiBehavior (full_auto/semi_auto/record_only)
- **å·¥ä½œäººå‘˜è¯†åˆ«**ï¼šstaffEnabled, staffTypeFilter
- **å…³é”®è¯é…ç½®**ï¼škeywords
- **ä»»åŠ¡åˆ›å»º**ï¼šenableTaskCreation
- **æœºå™¨äººç»‘å®š**ï¼šrobotId

#### ååŒåˆ†æéœ€è¦çš„æ•°æ®
```typescript
{
  id: string;
  name: string;
  code: string;
  aiBehavior: 'full_auto' | 'semi_auto' | 'record_only';
  staffEnabled: boolean;
  staffTypeFilter: string[];
  keywords: string[];
  enableTaskCreation: boolean;
  robotId: string | null;
  robotName: string | null;
}
```

#### é…åˆæ–¹å¼
1. **è¯»å–é…åˆ**ï¼šè·å–æ‰€æœ‰ä¸šåŠ¡è§’è‰²é…ç½®
   - API: `GET /api/robots/business-roles`
   - ç”¨äºï¼šæŒ‰ä¸šåŠ¡è§’è‰²åˆ†æã€å…³é”®è¯åˆ†æã€æ•ˆèƒ½å¯¹æ¯”

2. **æ•°æ®æ³¨å…¥**ï¼šåœ¨å†³ç­–æ—¶è®°å½•ä½¿ç”¨çš„ä¸šåŠ¡è§’è‰²
   ```typescript
   // å†³ç­–æ—¶æ³¨å…¥ business_role å­—æ®µ
   INSERT INTO collaboration_decision_logs (
     ..., business_role
   ) VALUES (
     ..., business_role_code
   );
   ```

3. **å…³é”®è¯åŒ¹é…**ï¼šæ£€æŸ¥æ¶ˆæ¯æ˜¯å¦è§¦å‘å…³é”®è¯
   ```typescript
   function checkKeywords(message: string, role: BusinessRole): boolean {
     return role.keywords.some(keyword =>
       message.includes(keyword)
     );
   }
   ```

#### å…³é”®è”åŠ¨ç‚¹
- âœ… `code` - ç”¨äºå†³ç­–æ—¥å¿—ä¸­çš„ business_role å­—æ®µ
- âœ… `aiBehavior` - åˆ†æAIå¤„ç†æ•ˆç‡
- âœ… `staffTypeFilter` - æŒ‰å·¥ä½œäººå‘˜ç±»å‹ç­›é€‰
- âœ… `keywords` - å…³é”®è¯è§¦å‘åˆ†æ
- âœ… `enableTaskCreation` - ä»»åŠ¡ç»Ÿè®¡

---

### 2.3 å·¥ä½œäººå‘˜ç®¡ç†æ¿å— â­â­â­â­

#### æä¾›çš„å†…å®¹
- **å·¥ä½œäººå‘˜ä¿¡æ¯**ï¼šid, name, email, avatar
- **å·¥ä½œäººå‘˜è§’è‰²**ï¼šrole (admin/operator/staff)
- **å·¥ä½œäººå‘˜çŠ¶æ€**ï¼šstatus (online/offline/busy)
- **å½“å‰ä¼šè¯æ•°**ï¼šcurrent_sessions, max_sessions

#### ååŒåˆ†æéœ€è¦çš„æ•°æ®
```typescript
{
  staff_user_id: string;
  staff_name: string;
  staff_type: string; // éœ€è¦æ–°å¢å­—æ®µ
  status: string;
  current_sessions: number;
  max_sessions: number;
  total_interventions: number;
  avg_response_time: number;
}
```

#### é…åˆæ–¹å¼
1. **è¯»å–é…åˆ**ï¼šè·å–å·¥ä½œäººå‘˜åˆ—è¡¨
   - API: `GET /api/admin/staff`
   - ç”¨äºï¼šå·¥ä½œäººå‘˜æ´»è·ƒåº¦åˆ†æ

2. **ç±»å‹æ ‡è®°**ï¼šä¸ºå·¥ä½œäººå‘˜åˆ†é…ç±»å‹
   ```sql
   -- éœ€è¦æ·»åŠ  staff_type å­—æ®µ
   ALTER TABLE staff ADD COLUMN staff_type VARCHAR(50);
   ```

3. **æ´»åŠ¨è®°å½•**ï¼šè®°å½•å·¥ä½œäººå‘˜æ´»åŠ¨
   ```typescript
   INSERT INTO staff_activities (
     ..., staff_type
   ) VALUES (
     ..., 'community_ops' // ä»ä¸šåŠ¡è§’è‰²é…ç½®ä¸­è·å–
   );
   ```

#### å…³é”®è”åŠ¨ç‚¹
- âœ… `staff_user_id` - å…³è”æ´»åŠ¨è®°å½•
- âœ… `staff_type` - æŒ‰ç±»å‹åˆ†æï¼ˆéœ€è¦æ–°å¢ï¼‰
- âœ… `status` - åˆ†æåœ¨çº¿å·¥ä½œäººå‘˜å‚ä¸ç‡

---

### 2.4 æŒ‡ä»¤å‘é€æ¿å— â­â­â­

#### æä¾›çš„å†…å®¹
- **æŒ‡ä»¤é˜Ÿåˆ—**ï¼šcommandId, commandType, status
- **æ¶ˆæ¯å†å²**ï¼šmessageHistory
- **æ‰§è¡Œè®°å½•**ï¼šexecutedAt, completedAt, result

#### ååŒåˆ†æéœ€è¦çš„æ•°æ®
```typescript
{
  commandId: string;
  robotId: string;
  commandType: string;
  status: string;
  createdAt: string;
  completedAt?: string;
  // å…³è”ä¸šåŠ¡è§’è‰²ï¼ˆå¯é€‰ï¼‰
  business_role?: string;
}
```

#### é…åˆæ–¹å¼
1. **å¯é€‰å¢å¼º**ï¼šåœ¨æŒ‡ä»¤ä¸­è®°å½•ä¸šåŠ¡è§’è‰²
   ```typescript
   // å‘é€æŒ‡ä»¤æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¸šåŠ¡è§’è‰²
   interface CommandPayload {
     robotId: string;
     commandType: string;
     business_role?: string; // æ–°å¢å­—æ®µ
     // ... å…¶ä»–å‚æ•°
   }
   ```

2. **ç»Ÿè®¡é…åˆ**ï¼šæŒ‰ä¸šåŠ¡è§’è‰²ç»Ÿè®¡æŒ‡ä»¤æ‰§è¡Œæƒ…å†µ
   - API: `GET /api/commands/stats?businessRole=xxx`
   - ç”¨äºï¼šåˆ†æä¸šåŠ¡è§’è‰²çš„æŒ‡ä»¤æ‰§è¡Œæ•ˆç‡

#### å…³é”®è”åŠ¨ç‚¹
- ğŸ”µ `robotId` - å…³è”æœºå™¨äºº
- ğŸ”µ `business_role` - å¯é€‰ï¼ŒæŒ‰è§’è‰²åˆ†æï¼ˆå¾…å®ç°ï¼‰

---

### 2.5 ç›‘æ§å¤§å±æ¿å— â­â­â­â­

#### æä¾›çš„å†…å®¹
- **å®æ—¶ç›‘æ§**ï¼šæœºå™¨äººçŠ¶æ€ã€ä¼šè¯æ•°ã€æ¶ˆæ¯æ•°
- **å¥åº·åº¦è¯„åˆ†**ï¼šhealth_score
- **æˆåŠŸç‡ç»Ÿè®¡**ï¼šsuccess_rate
- **èµ„æºåˆ©ç”¨ç‡**ï¼šutilization_rate

#### ååŒåˆ†æéœ€è¦çš„æ•°æ®
```typescript
{
  robot_id: string;
  health_score: number;
  success_rate: number;
  current_sessions: number;
  avg_response_time: number;
  // ååŒæŒ‡æ ‡ï¼ˆéœ€è¦æ–°å¢ï¼‰
  collaboration_rate: number;
  ai_reply_rate: number;
  staff_intervention_rate: number;
}
```

#### é…åˆæ–¹å¼
1. **æ•°æ®å…±äº«**ï¼šååŒåˆ†ææ•°æ®æ³¨å…¥ç›‘æ§å¤§å±
   ```typescript
   // åœ¨ç›‘æ§å¤§å±ä¸­æ˜¾ç¤ºååŒæŒ‡æ ‡
   <Card>
     <CardTitle>ååŒæ•ˆç‡</CardTitle>
     <CardContent>
       <div>ååŒç‡: {collaborationRate}%</div>
       <div>AIå›å¤ç‡: {aiReplyRate}%</div>
     </CardContent>
   </Card>
   ```

2. **å®æ—¶æ¨é€**ï¼šWebSocket æ¨é€ååŒæ•°æ®
   ```typescript
   // å®æ—¶æ¨é€ååŒé¢„è­¦
   ws.send({
     type: 'collaboration_alert',
     data: {
       robot_id: 'xxx',
       alert_type: 'low_collaboration_rate',
       value: 0.3
     }
   });
   ```

#### å…³é”®è”åŠ¨ç‚¹
- âœ… `robot_id` - å…³è”æœºå™¨äºº
- âœ… `health_score` - ç»“åˆååŒç‡ç»¼åˆè¯„ä¼°
- âœ… `collaboration_rate` - éœ€è¦æ–°å¢ååŒæŒ‡æ ‡

---

### 2.6 ä¼šè¯ç®¡ç†æ¿å— â­â­â­â­â­ï¼ˆæ ¸å¿ƒï¼‰

#### æä¾›çš„å†…å®¹
- **ä¼šè¯ä¿¡æ¯**ï¼šsessionId, robotId, userId
- **ä¼šè¯çŠ¶æ€**ï¼šstatus (active/closed/archived)
- **ä¼šè¯å‚ä¸è€…**ï¼šparticipants, staff_user_id
- **æ¶ˆæ¯ç»Ÿè®¡**ï¼štotalMessages, aiMessages, staffMessages

#### ååŒåˆ†æéœ€è¦çš„æ•°æ®
```typescript
{
  session_id: string;
  robot_id: string;
  staff_user_id?: string;
  status: string;
  total_messages: number;
  ai_messages: number;
  staff_messages: number;
  // ååŒä¿¡æ¯ï¼ˆå·²æœ‰ï¼‰
  has_staff_intervention: boolean;
  business_role?: string; // éœ€è¦æ–°å¢
}
```

#### é…åˆæ–¹å¼
1. **è¯»å–é…åˆ**ï¼šè·å–ä¼šè¯åˆ—è¡¨
   - API: `GET /api/sessions`
   - ç”¨äºï¼šæŒ‰ä¼šè¯åˆ†æååŒæƒ…å†µ

2. **ååŒæ ‡è®°**ï¼šæ ‡è®°ä¼šè¯æ˜¯å¦éœ€è¦å·¥ä½œäººå‘˜ä»‹å…¥
   ```sql
   -- åœ¨ä¼šè¯è¡¨ä¸­æ·»åŠ ååŒæ ‡è®°
   ALTER TABLE sessions ADD COLUMN has_staff_intervention BOOLEAN DEFAULT false;
   ALTER TABLE sessions ADD COLUMN business_role VARCHAR(50);
   ```

3. **ç»Ÿè®¡æ•°æ®**ï¼šè®¡ç®—ä¼šè¯çš„ååŒæŒ‡æ ‡
   ```typescript
   function calculateSessionStats(session: Session) {
     return {
       collaborationRate: session.staffMessages / session.totalMessages,
       aiReplyRate: session.aiMessages / session.totalMessages,
       // ...
     };
   }
   ```

#### å…³é”®è”åŠ¨ç‚¹
- âœ… `session_id` - å…³è”å†³ç­–æ—¥å¿—
- âœ… `has_staff_intervention` - ç»Ÿè®¡ååŒç‡
- ğŸ”µ `business_role` - æŒ‰è§’è‰²åˆ†æï¼ˆå¾…å®ç°ï¼‰

---

### 2.7 çŸ¥è¯†åº“æ¿å— â­â­

#### æä¾›çš„å†…å®¹
- **å…³é”®è¯åº“**ï¼škeywords, scenarios, responses
- **è§„åˆ™é…ç½®**ï¼šrules, conditions, actions

#### ååŒåˆ†æéœ€è¦çš„æ•°æ®
```typescript
{
  keyword: string;
  scenario: string; // community_ops, after_sales, conversion_staff
  hit_count: number;
  hit_rate: number;
  avg_response_time: number;
}
```

#### é…åˆæ–¹å¼
1. **å¯é€‰å¢å¼º**ï¼šçŸ¥è¯†åº“å…³é”®è¯ä¸ä¸šåŠ¡è§’è‰²å…³è”
   ```typescript
   interface KeywordRule {
     keyword: string;
     business_role: string; // å…³è”ä¸šåŠ¡è§’è‰²
     scenario: string;
   }
   ```

2. **å‘½ä¸­ç‡ç»Ÿè®¡**ï¼šåˆ†æå…³é”®è¯å‘½ä¸­ç‡
   - API: `GET /api/keywords/stats`
   - ç”¨äºï¼šä¼˜åŒ–å…³é”®è¯é…ç½®

#### å…³é”®è”åŠ¨ç‚¹
- ğŸ”µ `business_role` - å…³è”ä¸šåŠ¡è§’è‰²ï¼ˆå¾…å®ç°ï¼‰
- ğŸ”µ `keyword` - å…³é”®è¯åˆ†æï¼ˆå¾…å®ç°ï¼‰

---

## ä¸‰ã€æ•°æ®æµå›¾

### 3.1 å®Œæ•´æ•°æ®æµ

```
ç”¨æˆ·æ¶ˆæ¯
  â”‚
  â”œâ”€â†’ æœºå™¨äººå¤„ç†
  â”‚     â”‚
  â”‚     â”œâ”€â†’ æŸ¥è¯¢ä¸šåŠ¡è§’è‰² (robot_id â†’ business_roles)
  â”‚     â”‚     â”‚
  â”‚     â”‚     â”œâ”€â†’ åŒ¹é…å…³é”®è¯ (keywords)
  â”‚     â”‚     â”œâ”€â†’ æ£€æŸ¥AIè¡Œä¸º (aiBehavior)
  â”‚     â”‚     â””â”€â†’ æ£€æŸ¥å·¥ä½œäººå‘˜è¯†åˆ« (staffEnabled, staffTypeFilter)
  â”‚     â”‚
  â”‚     â”œâ”€â†’ å†³ç­– (AIå›å¤ / å·¥ä½œäººå‘˜å›å¤ / ä¸¤è€…)
  â”‚     â”‚
  â”‚     â””â”€â†’ è®°å½•å†³ç­–æ—¥å¿—
  â”‚           â””â”€â†’ collaboration_decision_logs
  â”‚                 â”œâ”€â†’ business_role (è§’è‰²ä»£ç )
  â”‚                 â”œâ”€â†’ robot_id
  â”‚                 â”œâ”€â†’ session_id
  â”‚                 â””â”€â†’ decision_outcome
  â”‚
  â”œâ”€â†’ åˆ›å»ºä»»åŠ¡ (å¦‚æœ enableTaskCreation)
  â”‚     â””â”€â†’ tasks
  â”‚           â”œâ”€â†’ business_role_id
  â”‚           â”œâ”€â†’ robot_id
  â”‚           â””â”€â†’ staff_user_id
  â”‚
  â”œâ”€â†’ è®°å½•å…³é”®è¯è§¦å‘ (å¦‚æœè§¦å‘å…³é”®è¯)
  â”‚     â””â”€â†’ keyword_triggers
  â”‚           â”œâ”€â†’ business_role_id
  â”‚           â”œâ”€â†’ robot_id
  â”‚           â””â”€â†’ keyword
  â”‚
  â””â”€â†’ è®°å½•å·¥ä½œäººå‘˜æ´»åŠ¨
        â””â”€â†’ staff_activities
              â”œâ”€â†’ staff_user_id
              â”œâ”€â†’ staff_type (æ–°å¢)
              â””â”€â†’ activity_type
```

### 3.2 ååŒåˆ†ææ•°æ®æ¥æº

```
ååŒåˆ†ææ•°æ®æ¥æº
  â”‚
  â”œâ”€â†’ collaboration_decision_logs (æ ¸å¿ƒ)
  â”‚     â”œâ”€â†’ æŒ‰ business_role åˆ†ç»„
  â”‚     â”œâ”€â†’ æŒ‰ robot_id åˆ†ç»„
  â”‚     â””â”€â†’ æŒ‰ session_id åˆ†ç»„
  â”‚
  â”œâ”€â†’ staff_activities
  â”‚     â”œâ”€â†’ æŒ‰ staff_type åˆ†ç»„ (æ–°å¢)
  â”‚     â”œâ”€â†’ æŒ‰ robot_id åˆ†ç»„
  â”‚     â””â”€â†’ æŒ‰ business_role å…³è”
  â”‚
  â”œâ”€â†’ tasks (æ–°å»º)
  â”‚     â”œâ”€â†’ æŒ‰ business_role_id åˆ†ç»„
  â”‚     â””â”€â†’ ç»Ÿè®¡ä»»åŠ¡å®Œæˆç‡
  â”‚
  â”œâ”€â†’ keyword_triggers (æ–°å»º)
  â”‚     â”œâ”€â†’ æŒ‰ keyword åˆ†ç»„
  â”‚     â””â”€â†’ æŒ‰ business_role_id åˆ†ç»„
  â”‚
  â””â”€â†’ robots / business_roles
        â””â”€â†’ æä¾›åŸºç¡€ä¿¡æ¯
```

---

## å››ã€é…åˆä¼˜å…ˆçº§

### P0 - æ ¸å¿ƒé…åˆï¼ˆå¿…é¡»ï¼‰

| æ¿å— | é…åˆå†…å®¹ | é‡è¦æ€§ | éš¾åº¦ |
|-----|---------|-------|------|
| ä¸šåŠ¡è§’è‰²ç®¡ç† | è¯»å–è§’è‰²é…ç½®ã€AIè¡Œä¸ºã€å…³é”®è¯ | â­â­â­â­â­ | ä½ |
| æœºå™¨äººç®¡ç† | è¯»å–æœºå™¨äººåˆ—è¡¨ã€çŠ¶æ€ | â­â­â­â­â­ | ä½ |
| ä¼šè¯ç®¡ç† | è¯»å–ä¼šè¯ä¿¡æ¯ã€æ ‡è®°ååŒ | â­â­â­â­â­ | ä¸­ |
| å·¥ä½œäººå‘˜ç®¡ç† | è¯»å–å·¥ä½œäººå‘˜ä¿¡æ¯ã€ç±»å‹ | â­â­â­â­ | ä½ |

### P1 - é‡è¦é…åˆï¼ˆæ¨èï¼‰

| æ¿å— | é…åˆå†…å®¹ | é‡è¦æ€§ | éš¾åº¦ |
|-----|---------|-------|------|
| ç›‘æ§å¤§å± | æ˜¾ç¤ºååŒæŒ‡æ ‡ | â­â­â­â­ | ä¸­ |
| æŒ‡ä»¤å‘é€ | å¯é€‰çš„ä¸šåŠ¡è§’è‰²è®°å½• | â­â­â­ | ä½ |

### P2 - å¯é€‰é…åˆï¼ˆå¢å¼ºï¼‰

| æ¿å— | é…åˆå†…å®¹ | é‡è¦æ€§ | éš¾åº¦ |
|-----|---------|-------|------|
| çŸ¥è¯†åº“ | å…³é”®è¯å…³è”ä¸šåŠ¡è§’è‰² | â­â­ | ä¸­ |

---

## äº”ã€éœ€è¦æ–°å¢çš„è”åŠ¨ç‚¹

### 5.1 æ•°æ®åº“å±‚é¢

1. **collaboration_decision_logs** - å·²æœ‰ business_role å­—æ®µ âœ…
2. **staff_activities** - éœ€è¦æ·»åŠ  staff_type å­—æ®µ ğŸ”µ
3. **sessions** - éœ€è¦æ·»åŠ  business_role å­—æ®µ ğŸ”µ
4. **tasks** - æ–°è¡¨ï¼ŒåŒ…å« business_role_id âœ…
5. **keyword_triggers** - æ–°è¡¨ï¼ŒåŒ…å« business_role_id âœ…

### 5.2 API å±‚é¢

1. **ååŒåˆ†æ API** - å·²æœ‰ âœ…
2. **æŒ‰ä¸šåŠ¡è§’è‰²ç»Ÿè®¡** - éœ€è¦æ–°å¢ ğŸ”µ
3. **å…³é”®è¯è§¦å‘ç»Ÿè®¡** - éœ€è¦æ–°å¢ ğŸ”µ
4. **ä»»åŠ¡ç»Ÿè®¡** - éœ€è¦æ–°å¢ ğŸ”µ

### 5.3 å‰ç«¯å±‚é¢

1. **ååŒåˆ†æé¡µé¢** - å·²æœ‰ âœ…
2. **ä¸šåŠ¡è§’è‰²åˆ†ææ ‡ç­¾é¡µ** - éœ€è¦æ–°å¢ ğŸ”µ
3. **å…³é”®è¯åˆ†ææ ‡ç­¾é¡µ** - éœ€è¦æ–°å¢ ğŸ”µ
4. **ä»»åŠ¡åˆ†ææ ‡ç­¾é¡µ** - éœ€è¦æ–°å¢ ğŸ”µ

---

## å…­ã€å®æ–½å»ºè®®

### é˜¶æ®µ 1ï¼šæ ¸å¿ƒé…åˆï¼ˆ1-2å¤©ï¼‰

1. âœ… ç¡®è®¤ `collaboration_decision_logs.business_role` å­—æ®µä½¿ç”¨
2. ğŸ”µ ä¸º `staff_activities` æ·»åŠ  `staff_type` å­—æ®µ
3. ğŸ”µ ä¸º `sessions` æ·»åŠ  `business_role` å­—æ®µ
4. ğŸ”µ åˆ›å»º `tasks` å’Œ `keyword_triggers` è¡¨
5. ğŸ”µ å¼€å‘æŒ‰ä¸šåŠ¡è§’è‰²ç»Ÿè®¡çš„ API

### é˜¶æ®µ 2ï¼šæ•°æ®æ³¨å…¥ï¼ˆ2-3å¤©ï¼‰

1. ğŸ”µ ä¿®æ”¹å†³ç­–é€»è¾‘ï¼Œæ³¨å…¥ business_role å­—æ®µ
2. ğŸ”µ ä¿®æ”¹å·¥ä½œäººå‘˜æ´»åŠ¨è®°å½•ï¼Œæ³¨å…¥ staff_type å­—æ®µ
3. ğŸ”µ å®ç°ä»»åŠ¡åˆ›å»ºåŠŸèƒ½
4. ğŸ”µ å®ç°å…³é”®è¯è§¦å‘è®°å½•åŠŸèƒ½

### é˜¶æ®µ 3ï¼šå‰ç«¯å±•ç¤ºï¼ˆ3-4å¤©ï¼‰

1. ğŸ”µ å¼€å‘ä¸šåŠ¡è§’è‰²åˆ†ææ ‡ç­¾é¡µ
2. ğŸ”µ å¼€å‘å…³é”®è¯åˆ†ææ ‡ç­¾é¡µ
3. ğŸ”µ å¼€å‘ä»»åŠ¡åˆ†ææ ‡ç­¾é¡µ
4. ğŸ”µ é›†æˆåˆ°ååŒåˆ†æä¸»é¡µé¢

### é˜¶æ®µ 4ï¼šå¢å¼ºåŠŸèƒ½ï¼ˆ2-3å¤©ï¼‰

1. ğŸ”µ ç›‘æ§å¤§å±æ˜¾ç¤ºååŒæŒ‡æ ‡
2. ğŸ”µ æŒ‡ä»¤å‘é€æ”¯æŒä¸šåŠ¡è§’è‰²é€‰æ‹©
3. ğŸ”µ çŸ¥è¯†åº“å…³é”®è¯å…³è”ä¸šåŠ¡è§’è‰²

---

## ä¸ƒã€æ€»ç»“

### å·²æœ‰çš„é…åˆç‚¹ âœ…

1. âœ… æœºå™¨äººç®¡ç† - æä¾›æœºå™¨äººåˆ—è¡¨
2. âœ… ä¸šåŠ¡è§’è‰²ç®¡ç† - æä¾›è§’è‰²é…ç½®
3. âœ… ååŒåˆ†æ - decision_logs æœ‰ business_role å­—æ®µ

### éœ€è¦æ–°å»ºçš„é…åˆç‚¹ ğŸ”µ

1. ğŸ”µ staff_activities.staff_type - å·¥ä½œäººå‘˜ç±»å‹
2. ğŸ”µ sessions.business_role - ä¼šè¯ä¸šåŠ¡è§’è‰²
3. ğŸ”µ tasks è¡¨ - ä»»åŠ¡è®°å½•
4. ğŸ”µ keyword_triggers è¡¨ - å…³é”®è¯è§¦å‘è®°å½•
5. ğŸ”µ æŒ‰ä¸šåŠ¡è§’è‰²ç»Ÿè®¡çš„ API
6. ğŸ”µ å‰ç«¯ä¸šåŠ¡è§’è‰²åˆ†ææ ‡ç­¾é¡µ

### é¢„è®¡å·¥ä½œé‡

- é˜¶æ®µ 1: 1-2å¤©
- é˜¶æ®µ 2: 2-3å¤©
- é˜¶æ®µ 3: 3-4å¤©
- é˜¶æ®µ 4: 2-3å¤©

**æ€»è®¡ï¼š8-12å¤©**
