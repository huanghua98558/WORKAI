# æµç¨‹å¼•æ“ä¼˜åŒ–æ–¹æ¡ˆåˆ†æ

## ğŸ“Š ä¸€ã€ç°çŠ¶åˆ†æ

### 1.1 ç°æœ‰6ä¸ªæµç¨‹åŠŸèƒ½è¦†ç›–

| æµç¨‹åç§° | è§¦å‘ç±»å‹ | æ ¸å¿ƒåŠŸèƒ½ | è¦†ç›–åœºæ™¯ |
|---------|---------|---------|---------|
| æ ‡å‡†å®¢æœæµç¨‹ | Webhook | æ¶ˆæ¯æ¥æ”¶ã€æ„å›¾è¯†åˆ«ã€æƒ…ç»ªåˆ†æã€AIå›å¤ã€äººå·¥æ¥ç®¡ | æ ‡å‡†å®¢æœå’¨è¯¢ |
| é£é™©ç›‘æ§æµç¨‹ | Scheduled | ç›‘æ§æ¶ˆæ¯ã€é£é™©æ£€æµ‹ã€é£é™©åˆ†çº§ã€å‘Šè­¦å…¥åº“ | é£é™©å†…å®¹ç›‘æ§ |
| å‘Šè­¦å¤„ç†æµç¨‹ | Webhook | å‘Šè­¦çº§åˆ«åˆ¤æ–­ã€å‡çº§å¤„ç†ã€å¤šæ¸ é“é€šçŸ¥ | å‘Šè­¦å‡çº§å’Œé€šçŸ¥ |
| æ•°æ®åŒæ­¥æµç¨‹ | Scheduled | æ•°æ®æŸ¥è¯¢ã€è½¬æ¢ã€éªŒè¯ã€åŒæ­¥ | æ•°æ®ä¸€è‡´æ€§ç»´æŠ¤ |
| æ»¡æ„åº¦è°ƒæŸ¥æµç¨‹ | Webhook | ä¼šè¯æŸ¥è¯¢ã€æ»¡æ„åº¦æ¨æ–­ã€åˆ†çº§å¤„ç† | æ»¡æ„åº¦è°ƒæŸ¥å’Œå›è®¿ |
| ç¾¤ç»„åä½œæµç¨‹ | Webhook | ç¾¤ç»„è¯†åˆ«ã€å¤šæœºå™¨äººååŒã€æ¶ˆæ¯åˆ†å‘ | å¤šæœºå™¨äººåä½œ |

### 1.2 ç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ˆå…±14ä¸ªï¼‰

```
æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼š
â”œâ”€â”€ 1. æ¶ˆæ¯æ¥æ”¶ä¸å¤„ç† âœ… (æ ‡å‡†å®¢æœã€ç¾¤ç»„åä½œ)
â”œâ”€â”€ 2. æ„å›¾è¯†åˆ«ç³»ç»Ÿ âœ… (æ ‡å‡†å®¢æœ)
â”œâ”€â”€ 3. æƒ…ç»ªåˆ†æç³»ç»Ÿ âœ… (æ ‡å‡†å®¢æœ)
â”œâ”€â”€ 4. ä¼šè¯ç®¡ç† âœ… (æ ‡å‡†å®¢æœ)
â”œâ”€â”€ 5. AIå›å¤ç³»ç»Ÿ âœ… (æ ‡å‡†å®¢æœã€ç¾¤ç»„åä½œ)
â”œâ”€â”€ 6. é£é™©ç®¡ç†ç³»ç»Ÿ âœ… (é£é™©ç›‘æ§)
â”œâ”€â”€ 7. ç›‘æ§é¢„è­¦ç³»ç»Ÿ âœ… (é£é™©ç›‘æ§)
â”œâ”€â”€ 8. å‘Šè­¦å‡çº§ç³»ç»Ÿ âœ… (å‘Šè­¦å¤„ç†)
â”œâ”€â”€ 9. æ•°æ®åŒæ­¥ç³»ç»Ÿ âœ… (æ•°æ®åŒæ­¥)
â”œâ”€â”€ 10. æ»¡æ„åº¦è°ƒæŸ¥ç³»ç»Ÿ âœ… (æ»¡æ„åº¦è°ƒæŸ¥)
â”œâ”€â”€ 11. ç¾¤ç»„åä½œç³»ç»Ÿ âœ… (ç¾¤ç»„åä½œ)
â”œâ”€â”€ 12. å·¥ä½œäººå‘˜å¹²é¢„ âœ… (æ ‡å‡†å®¢æœ)
â”œâ”€â”€ 13. æ¶ˆæ¯åˆ†å‘ç³»ç»Ÿ âœ… (æ ‡å‡†å®¢æœã€ç¾¤ç»„åä½œ)
â””â”€â”€ 14. æŒ‡ä»¤ç®¡ç†ç³»ç»Ÿ âœ… (æ ‡å‡†å®¢æœ)
```

### 1.3 ç°æœ‰é—®é¢˜

1. **æµç¨‹åŠŸèƒ½å•ä¸€**ï¼šæ¯ä¸ªæµç¨‹åªè¦†ç›–éƒ¨åˆ†åŠŸèƒ½ï¼Œç¼ºä¹ç»¼åˆæ€§
2. **åœºæ™¯è¦†ç›–ä¸å®Œæ•´**ï¼šç¼ºå°‘å¯¹å‘˜å·¥ç›‘æ§ã€æ€§èƒ½ç»Ÿè®¡ã€æ™ºèƒ½è°ƒåº¦ç­‰åœºæ™¯çš„æ”¯æŒ
3. **æµç¨‹è€¦åˆåº¦é«˜**ï¼šé£é™©ç›‘æ§ã€å‘Šè­¦å¤„ç†ã€æ»¡æ„åº¦è°ƒæŸ¥ç­‰æµç¨‹ç‹¬ç«‹ï¼Œä½†å®é™…åº”ç”¨ä¸­ç»å¸¸éœ€è¦è”åŠ¨
4. **é…ç½®çµæ´»æ€§ä½**ï¼šæµç¨‹é…ç½®è¾ƒä¸ºå›ºå®šï¼Œéš¾ä»¥é€‚åº”ä¸åŒä¸šåŠ¡éœ€æ±‚

---

## ğŸ¯ äºŒã€ä¼˜åŒ–æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šä¿æŒ6ä¸ªæµç¨‹ï¼Œå¢å¼ºåŠŸèƒ½ï¼ˆæ¨èï¼‰â­

#### ä¼˜åŒ–åŸåˆ™

1. **å¤šç›®æ ‡é›†åˆ**ï¼šåœ¨ä¸€ä¸ªæµç¨‹ä¸­å®ç°å¤šä¸ªç›®æ ‡ï¼Œå‡å°‘æµç¨‹æ•°é‡
2. **åœºæ™¯è¦†ç›–å…¨é¢**ï¼šç¡®ä¿æ¯ä¸ªä¸»è¦ä¸šåŠ¡åœºæ™¯éƒ½æœ‰å¯¹åº”æµç¨‹
3. **é…ç½®çµæ´»**ï¼šé€šè¿‡èŠ‚ç‚¹é…ç½®å®ç°ä¸åŒä¸šåŠ¡éœ€æ±‚
4. **åŠŸèƒ½å®Œæ•´**ï¼šè¦†ç›–ç³»ç»Ÿæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### ä¼˜åŒ–åçš„6ä¸ªæµç¨‹

| åºå· | æµç¨‹åç§° | è§¦å‘ç±»å‹ | ä¼˜åŒ–ååŠŸèƒ½ | è¦†ç›–åœºæ™¯ |
|-----|---------|---------|-----------|---------|
| 1 | **æ™ºèƒ½å®¢æœæµç¨‹** | Webhook | æ•´åˆæ ‡å‡†å®¢æœ+ç¾¤ç»„åä½œ | å•èŠ/ç¾¤èŠå®¢æœã€å¤šæœºå™¨äººååŒ |
| 2 | **é£é™©ç›‘æ§ä¸å‘Šè­¦æµç¨‹** | Scheduled + Webhook | æ•´åˆé£é™©ç›‘æ§+å‘Šè­¦å¤„ç† | é£é™©ç›‘æ§ã€å‘Šè­¦å‡çº§ã€å¤šæ¸ é“é€šçŸ¥ |
| 3 | **æ•°æ®åŒæ­¥æµç¨‹** | Scheduled | å¢å¼ºæ•°æ®æ ¡éªŒã€å†²çªè§£å†³ã€å¢é‡åŒæ­¥ | æ•°æ®ä¸€è‡´æ€§ç»´æŠ¤ |
| 4 | **æ»¡æ„åº¦è°ƒæŸ¥æµç¨‹** | Webhook | å¢å¼ºé—®å·è®¾è®¡ã€è§¦å‘æ—¶æœºã€ç»“æœåˆ†æ | æ»¡æ„åº¦è°ƒæŸ¥ã€ä½æ»¡æ„åº¦å›è®¿ |
| 5 | **ç›‘æ§ä¸ç»Ÿè®¡æµç¨‹** | Scheduled | æ–°å¢ï¼šå‘˜å·¥ç›‘æ§ã€æ€§èƒ½ç»Ÿè®¡ã€å¼‚å¸¸æ£€æµ‹ | å‘˜å·¥å·¥ä½œç›‘æ§ã€ç³»ç»Ÿæ€§èƒ½ç›‘æ§ |
| 6 | **æ™ºèƒ½è°ƒåº¦æµç¨‹** | Scheduled | æ–°å¢ï¼šä»»åŠ¡åˆ†é…ã€ä¼˜å…ˆçº§è°ƒåº¦ã€èµ„æºä¼˜åŒ– | æ™ºèƒ½ä»»åŠ¡è°ƒåº¦ã€èµ„æºä¼˜åŒ– |

---

## ğŸ“ ä¸‰ã€è¯¦ç»†è®¾è®¡

### 3.1 æ™ºèƒ½å®¢æœæµç¨‹ï¼ˆæ•´åˆæ ‡å‡†å®¢æœ+ç¾¤ç»„åä½œï¼‰

**æµç¨‹å›¾**ï¼š
```
MESSAGE_ENTRY â†’ SESSION_CREATE â†’ INTENT_RECOGNITION â†’ EMOTION_ANALYZE
    â†“
DECISION_NODE
    â”œâ†’ AI_REPLY â†’ MESSAGE_DISPATCH â†’ MESSAGE_EXIT â†’ FLOW_END
    â”œâ†’ STAFF_INTERVENTION â†’ SEND_COMMAND â†’ FLOW_END
    â”œâ†’ RISK_HANDLER â†’ ALERT_SAVE â†’ ALERT_NOTIFY â†’ FLOW_END
    â”œâ†’ GROUP_DISPATCH â†’ MULTI_ROBOT â†’ MESSAGE_SYNC â†’ MESSAGE_EXIT â†’ FLOW_END
    â””â†’ SATISFACTION_INFER â†’ (å»¶è¿Ÿè§¦å‘) SATISFACTION_SURVEY_FLOW
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… æ¶ˆæ¯æ¥æ”¶ä¸ä¿å­˜
- âœ… ä¼šè¯åˆ›å»ºä¸ç®¡ç†
- âœ… æ„å›¾è¯†åˆ«ï¼ˆå’¨è¯¢/æŠ•è¯‰/å”®å/äº’åŠ¨/è´­ä¹°/å…¶ä»–ï¼‰
- âœ… æƒ…ç»ªåˆ†æï¼ˆæ­£é¢/ä¸­æ€§/è´Ÿé¢ï¼‰
- âœ… æ™ºèƒ½å†³ç­–åˆ†æµ
  - æ­£å¸¸å’¨è¯¢ â†’ AIè‡ªåŠ¨å›å¤
  - è´Ÿé¢æƒ…ç»ª/æŠ•è¯‰ â†’ äººå·¥æ¥ç®¡
  - é£é™©å†…å®¹ â†’ é£é™©å¤„ç†+å‘Šè­¦
  - ç¾¤ç»„æ¶ˆæ¯ â†’ å¤šæœºå™¨äººååŒ
- âœ… AIå›å¤ç”Ÿæˆï¼ˆæ”¯æŒè§’è‰²äººè®¾ã€è¯æœ¯æ¨¡æ¿ï¼‰
- âœ… äººå·¥æ¥ç®¡ä¸ä»»åŠ¡åˆ†é…
- âœ… å¤šæœºå™¨äººååŒï¼ˆVIPç¾¤/æŠ€æœ¯æ”¯æŒç¾¤/é”€å”®ç¾¤ï¼‰
- âœ… æ¶ˆæ¯åˆ†å‘ä¸å‘é€
- âœ… æ»¡æ„åº¦æ¨æ–­ï¼ˆä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼‰

**èŠ‚ç‚¹é…ç½®å¢å¼º**ï¼š
```json
{
  "decisionNode": {
    "conditions": [
      {
        "expression": "context.groupType === 'vip'",
        "label": "VIPç¾¤",
        "targetNodeId": "node_vip_robot",
        "priority": 1
      },
      {
        "expression": "context.emotion === 'negative' || context.intent === 'æŠ•è¯‰'",
        "label": "è½¬äººå·¥",
        "targetNodeId": "node_staff_intervention",
        "priority": 2
      },
      {
        "expression": "context.riskLevel >= 3",
        "label": "é£é™©å¤„ç†",
        "targetNodeId": "node_risk_handler",
        "priority": 3
      },
      {
        "expression": "context.needReply === true",
        "label": "AIå›å¤",
        "targetNodeId": "node_ai_reply",
        "priority": 4
      }
    ]
  }
}
```

**é¢„è®¡è€—æ—¶**ï¼š3-5ç§’

---

### 3.2 é£é™©ç›‘æ§ä¸å‘Šè­¦æµç¨‹ï¼ˆæ•´åˆé£é™©ç›‘æ§+å‘Šè­¦å¤„ç†ï¼‰

**æµç¨‹å›¾**ï¼š
```
START â†’ MONITOR_NODE â†’ RISK_DETECT â†’ RISK_LEVEL_DECISION
    â†“
DECISION_NODE
    â”œâ†’ HIGH_RISK â†’ ALERT_SAVE â†’ ALERT_NOTIFY â†’ STAFF_INTVENTION â†’ ESCALATION â†’ FLOW_END
    â”œâ†’ MEDIUM_RISK â†’ LOG_SAVE â†’ ESCALATION_CHECK â†’ ALERT_NOTIFY â†’ FLOW_END
    â””â†’ LOW_RISK â†’ LOG_SAVE â†’ FLOW_END
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… å®æ—¶ç›‘æ§ç¾¤å†…æ¶ˆæ¯
- âœ… é£é™©æ£€æµ‹ï¼ˆæ•æ„Ÿè¯ã€å¼‚å¸¸è¡Œä¸ºã€é«˜é¢‘æŠ•è¯‰ï¼‰
- âœ… é£é™©ç­‰çº§è¯„ä¼°ï¼ˆä¸¥é‡/é«˜/ä¸­/ä½ï¼‰
- âœ… å‘Šè­¦çº§åˆ«åˆ¤æ–­ï¼ˆP1/P2/P3/P4ï¼‰
- âœ… å‘Šè­¦å…¥åº“
- âœ… å‘Šè­¦å‡çº§ï¼ˆæ—¶é—´è‡ªåŠ¨å‡çº§ã€ä¸¥é‡è‡ªåŠ¨å‡çº§ã€ç”¨æˆ·ä¸æ»¡æ„å‡çº§ï¼‰
- âœ… å¤šæ¸ é“é€šçŸ¥ï¼ˆé‚®ä»¶/çŸ­ä¿¡/ç”µè¯/æœºå™¨äºº/é’‰é’‰/é£ä¹¦ï¼‰
- âœ… å·¥ä½œäººå‘˜é€šçŸ¥
- âœ… é£é™©å®‰æŠšå›å¤

**è§¦å‘æ–¹å¼**ï¼š
1. **å®šæ—¶è§¦å‘**ï¼ˆé»˜è®¤æ¯5åˆ†é’Ÿï¼‰- ä¸»åŠ¨ç›‘æ§ç¾¤å†…æ¶ˆæ¯
2. **äº‹ä»¶è§¦å‘**ï¼ˆWebhookï¼‰- å®æ—¶å¤„ç†é«˜é£é™©äº‹ä»¶

**èŠ‚ç‚¹é…ç½®å¢å¼º**ï¼š
```json
{
  "riskDetect": {
    "riskRules": [
      {
        "ruleName": "æ•æ„Ÿè¯æ£€æµ‹",
        "conditions": {
          "hasSensitiveKeywords": true,
          "keywordList": ["æŠ•è¯‰", "éª—å­", "å·®è¯„", "é€€æ¬¾", "æ¬ºè¯ˆ"]
        },
        "riskLevel": 2
      },
      {
        "ruleName": "é«˜é¢‘æŠ•è¯‰",
        "conditions": {
          "complaintCount": 3,
          "timeRange": "5m"
        },
        "riskLevel": 3
      },
      {
        "ruleName": "å¼‚å¸¸è¡Œä¸º",
        "conditions": {
          "messageFrequency": "> 10/min",
          "spamDetection": true
        },
        "riskLevel": 4
      }
    ]
  },
  "escalationRules": {
    "timeEscalation": {
      "enabled": true,
      "interval": 1800,
      "maxEscalationLevel": 5
    },
    "severityEscalation": {
      "enabled": true,
      "thresholdRiskLevel": 4,
      "escalateTo": "level_5"
    },
    "userDissatisfactionEscalation": {
      "enabled": true,
      "triggerConditions": {
        "angryEmotion": "immediate_intervention",
        "negativeEmotion": "elevate_alert",
        "negativeKeywords": "elevate_alert_2"
      }
    }
  }
}
```

**é¢„è®¡è€—æ—¶**ï¼š
- å®šæ—¶ç›‘æ§ï¼š1-2ç§’
- äº‹ä»¶è§¦å‘ï¼š2-4ç§’

---

### 3.3 æ•°æ®åŒæ­¥æµç¨‹ï¼ˆå¢å¼ºï¼‰

**æµç¨‹å›¾**ï¼š
```
START â†’ DATA_QUERY â†’ DATA_TRANSFORM â†’ DATA_VALIDATION â†’ DECISION
    â†“
DECISION_NODE
    â”œâ†’ SUCCESS â†’ UPDATE_DATABASE â†’ LOG_SAVE â†’ FLOW_END
    â”œâ†’ CONFLICT â†’ CONFLICT_RESOLUTION â†’ UPDATE_DATABASE â†’ LOG_SAVE â†’ FLOW_END
    â””â†’ FAILED â†’ LOG_ERROR â†’ ALERT_SAVE â†’ FLOW_END
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… ä»æ¶ˆæ¯ä¸­å¿ƒè·å–æ•°æ®
- âœ… æ•°æ®è½¬æ¢ï¼ˆå­—æ®µæ˜ å°„ã€æ—¥æœŸè§£æã€æ ¼å¼è½¬æ¢ï¼‰
- âœ… æ•°æ®éªŒè¯ï¼ˆå¿…å¡«å­—æ®µã€æ•°æ®ç±»å‹ã€ä¸šåŠ¡è§„åˆ™ï¼‰
- âœ… å†²çªæ£€æµ‹ä¸è§£å†³ï¼ˆåŸºäºID/æ—¶é—´æˆ³/ä¸šåŠ¡è§„åˆ™ï¼‰
- âœ… å¢é‡åŒæ­¥ï¼ˆåŸºäºæœ€ååŒæ­¥æ—¶é—´ï¼‰
- âœ… åŒæ­¥åˆ°æµç¨‹å¼•æ“æ•°æ®åº“
- âœ… åŒæ­¥å¤±è´¥å‘Šè­¦

**å¢å¼ºåŠŸèƒ½**ï¼š
- âœ… **å†²çªè§£å†³ç­–ç•¥**ï¼š
  - `overwrite` - è¦†ç›–æ—§æ•°æ®
  - `merge` - åˆå¹¶æ•°æ®
  - `keep_newest` - ä¿ç•™æœ€æ–°çš„
  - `manual` - äººå·¥å¤„ç†
- âœ… **å¢é‡åŒæ­¥ä¼˜åŒ–**ï¼š
  - åŸºäºæ—¶é—´æˆ³çš„å¢é‡æŸ¥è¯¢
  - æ–­ç‚¹ç»­ä¼ æœºåˆ¶
  - åŒæ­¥è¿›åº¦è¿½è¸ª
- âœ… **æ•°æ®æ ¡éªŒå¢å¼º**ï¼š
  - å¿…å¡«å­—æ®µæ ¡éªŒ
  - æ•°æ®æ ¼å¼æ ¡éªŒ
  - ä¸šåŠ¡è§„åˆ™æ ¡éªŒ
  - å¤–é”®å…³è”æ ¡éªŒ

**èŠ‚ç‚¹é…ç½®å¢å¼º**ï¼š
```json
{
  "dataQuery": {
    "source": "info_center",
    "endpoint": "/api/messages",
    "query": {
      "startDate": "{{context.lastSyncTime}}",
      "endDate": "{{context.syncTime}}",
      "limit": 10000
    },
    "syncMode": "incremental"
  },
  "dataTransform": {
    "transformRules": [
      {
        "rule": "rename_fields",
        "mapping": {
          "message_type": "messageType",
          "sender_type": "senderType"
        }
      },
      {
        "rule": "parse_dates",
        "fields": ["createdAt", "updatedAt"],
        "format": "YYYY-MM-DD HH:mm:ss"
      }
    ]
  },
  "dataValidation": {
    "validationRules": [
      {
        "field": "id",
        "required": true,
        "type": "string"
      },
      {
        "field": "content",
        "required": true,
        "type": "string",
        "maxLength": 10000
      },
      {
        "field": "sessionId",
        "required": true,
        "type": "string"
      }
    ],
    "errorAction": "skip",
    "logErrors": true
  },
  "conflictResolution": {
    "strategy": "keep_newest",
    "conflictFields": ["updatedAt"],
    "fallbackStrategy": "manual"
  }
}
```

**é¢„è®¡è€—æ—¶**ï¼š5-15ç§’ï¼ˆå–å†³äºæ•°æ®é‡ï¼‰

---

### 3.4 æ»¡æ„åº¦è°ƒæŸ¥æµç¨‹ï¼ˆå¢å¼ºï¼‰

**æµç¨‹å›¾**ï¼š
```
START â†’ DATA_QUERY (ä¼šè¯ä¿¡æ¯) â†’ SATISFACTION_INFER â†’ DECISION
    â†“
DECISION_NODE
    â”œâ†’ HIGH_SATISFACTION (â‰¥4) â†’ LOG_SAVE â†’ SEND_THANK â†’ FLOW_END
    â”œâ†’ MEDIUM_SATISFACTION (3-4) â†’ LOG_SAVE â†’ SEND_THANK â†’ FLOW_END
    â””â†’ LOW_SATISFACTION (<3) â†’ LOG_SAVE â†’ TASK_ASSIGN â†’ ALERT_SAVE â†’ FLOW_END
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… æŸ¥è¯¢ä¼šè¯è¯¦ç»†ä¿¡æ¯
- âœ… AIæ¨æ–­æ»¡æ„åº¦ï¼ˆåŸºäºå¯¹è¯å†…å®¹ã€æƒ…ç»ªã€å›å¤è´¨é‡ï¼‰
- âœ… æ»¡æ„åº¦è¯„åˆ†ï¼ˆ1-5åˆ†ï¼‰
- âœ… æ»¡æ„åº¦åˆ†çº§å¤„ç†
- âœ… å‘é€æ„Ÿè°¢æ¶ˆæ¯
- âœ… ä½æ»¡æ„åº¦å›è®¿ä»»åŠ¡
- âœ… åˆ›å»ºæ”¹è¿›å·¥å•

**è§¦å‘æ—¶æœº**ï¼š
1. ä¼šè¯ç»“æŸæ—¶è‡ªåŠ¨è§¦å‘
2. äººå·¥æ‰‹åŠ¨è§¦å‘
3. å®šæ—¶æ‰¹é‡è§¦å‘ï¼ˆæ¯å¤©ä¸€æ¬¡ï¼‰

**å¢å¼ºåŠŸèƒ½**ï¼š
- âœ… **é—®å·è®¾è®¡**ï¼šæ”¯æŒè‡ªå®šä¹‰é—®å·æ¨¡æ¿
- âœ… **å¤šç»´åº¦è¯„ä¼°**ï¼šæƒ…æ„Ÿã€å›å¤è´¨é‡ã€é—®é¢˜è§£å†³ã€ç”¨æˆ·åé¦ˆ
- âœ… **è§¦å‘æ—¶æœºæ§åˆ¶**ï¼š
  - ä¼šè¯æŒç»­æ—¶é—´ > 1åˆ†é’Ÿ
  - æ¶ˆæ¯äº¤äº’æ¬¡æ•° > 3æ¬¡
  - 24å°æ—¶å†…ä¸é‡å¤è°ƒæŸ¥
- âœ… **ç»“æœåˆ†æ**ï¼š
  - æ»¡æ„åº¦è¶‹åŠ¿åˆ†æ
  - ä½æ»¡æ„åº¦åŸå› åˆ†æ
  - æ”¹è¿›å»ºè®®ç”Ÿæˆ

**èŠ‚ç‚¹é…ç½®å¢å¼º**ï¼š
```json
{
  "satisfactionInfer": {
    "modelId": "doubao-pro-4k",
    "analysisFactors": [
      "sentiment",
      "response_quality",
      "issue_resolved",
      "user_feedback_keywords"
    ],
    "scoringRules": {
      "positive_emotion": 1,
      "resolved_issue": 1,
      "fast_response": 1,
      "negative_emotion": -2,
      "unresolved_issue": -2
    }
  },
  "triggerConditions": {
    "minSessionDuration": 60000,
    "minMessageCount": 3,
    "cooldownPeriod": 86400000,
    "excludeBots": true
  }
}
```

**é¢„è®¡è€—æ—¶**ï¼š2-3ç§’

---

### 3.5 ç›‘æ§ä¸ç»Ÿè®¡æµç¨‹ï¼ˆæ–°å¢ï¼‰

**æµç¨‹å›¾**ï¼š
```
START â†’ MONITOR_SYSTEM â†’ MONITOR_STAFF â†’ STATISTICS_CALC â†’ ANOMALY_DETECT â†’ DECISION
    â†“
DECISION_NODE
    â”œâ†’ NORMAL â†’ LOG_SAVE â†’ FLOW_END
    â”œâ†’ WARNING â†’ LOG_SAVE â†’ ALERT_SAVE â†’ FLOW_END
    â””â†’ CRITICAL â†’ LOG_SAVE â†’ ALERT_SAVE â†’ ALERT_NOTIFY â†’ STAFF_INTERVENTION â†’ FLOW_END
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… å®æ—¶ç›‘æ§ç³»ç»ŸæŒ‡æ ‡
  - å›è°ƒæ¥æ”¶æ•°ã€å¤„ç†æ•°ã€é”™è¯¯æ•°
  - AIè¯·æ±‚æ¬¡æ•°ã€æˆåŠŸç‡ã€å“åº”æ—¶é—´
  - æ´»è·ƒä¼šè¯æ•°ã€ä»Šæ—¥ä¼šè¯æ•°
- âœ… å‘˜å·¥å›å¤ç›‘æµ‹
  - æ£€æµ‹å‘˜å·¥æ˜¯å¦å›å¤ç”¨æˆ·æ¶ˆæ¯
  - å›å¤æ—¶é—´ç»Ÿè®¡
  - å›å¤ç‡è®¡ç®—
  - å¼‚å¸¸è¡Œä¸ºæ£€æµ‹ï¼ˆå›å¤ç‡<30%ï¼‰
- âœ… é¢‘ç‡è‡ªåŠ¨è°ƒæ•´
  - å‘˜å·¥å›å¤åï¼šé™ä½ç›‘æ§é¢‘ç‡ï¼ˆ5ç§’â†’30ç§’ï¼ŒæŒç»­10åˆ†é’Ÿï¼‰
  - æ— å›å¤æ—¶ï¼šæé«˜ç›‘æ§é¢‘ç‡ï¼ˆ5ç§’â†’2ç§’ï¼ŒæŒç»­3åˆ†é’Ÿï¼‰
- âœ… ä¸å›å¤è®°å½•
  - 5åˆ†é’Ÿæœªå›å¤è§¦å‘è®°å½•
  - æœ€å¤š10æ¬¡/å¤©
  - è¿ç»­3æ¬¡ä¸å›å¤è§¦å‘å‘Šè­¦
- âœ… æ€§èƒ½ç»Ÿè®¡
  - å›å¤æ¬¡æ•°ã€å¹³å‡æ—¶é—´ã€å›å¤ç‡
  - æ¶ˆæ¯å¤„ç†é€Ÿåº¦
  - ç³»ç»Ÿèµ„æºä½¿ç”¨ç‡

**è§¦å‘æ–¹å¼**ï¼š
- å®šæ—¶è§¦å‘ï¼ˆé»˜è®¤æ¯5åˆ†é’Ÿï¼‰

**èŠ‚ç‚¹é…ç½®**ï¼š
```json
{
  "staffReplyMonitoring": {
    "enableStaffReplyMonitoring": true,
    "frequencyAdjustmentRules": {
      "staffReplyDetected": {
        "newFrequency": 30000,
        "duration": 600000,
        "reason": "å‘˜å·¥å·²å›å¤ï¼Œé™ä½ç›‘æ§é¢‘ç‡"
      },
      "noReplyDetected": {
        "newFrequency": 2000,
        "duration": 180000,
        "reason": "å‘˜å·¥æœªå›å¤ï¼Œæé«˜ç›‘æ§é¢‘ç‡"
      },
      "resetFrequency": {
        "newFrequency": 5000,
        "reason": "è°ƒæ•´æ—¶é—´ç»“æŸï¼Œæ¢å¤é»˜è®¤é¢‘ç‡"
      }
    },
    "noReplyRecord": {
      "enableRecording": true,
      "recordThreshold": 300000,
      "maxRecordsPerDay": 10,
      "alertThreshold": 3
    },
    "anomalyDetection": {
      "lowReplyRateThreshold": 0.3,
      "highResponseTimeThreshold": 300000,
      "abnormalBehaviorAlert": true
    }
  },
  "systemMonitoring": {
    "metrics": [
      "callback_received",
      "callback_processed",
      "callback_error",
      "ai_requests",
      "ai_success_rate",
      "ai_response_time",
      "active_sessions",
      "today_sessions"
    ],
    "alertThresholds": {
      "error_rate": 0.1,
      "ai_failure_rate": 0.15,
      "response_time": 5000
    }
  }
}
```

**é¢„è®¡è€—æ—¶**ï¼š1-2ç§’

---

### 3.6 æ™ºèƒ½è°ƒåº¦æµç¨‹ï¼ˆæ–°å¢ï¼‰

**æµç¨‹å›¾**ï¼š
```
START â†’ TASK_COLLECT â†’ PRIORITY_CALCULATE â†’ RESOURCE_CHECK â†’ SCHEDULE_ALGORITHM â†’ DECISION
    â†“
DECISION_NODE
    â”œâ†’ IMMEDIATE â†’ TASK_ASSIGN â†’ SEND_COMMAND â†’ FLOW_END
    â”œâ†’ SCHEDULED â†’ TASK_QUEUE â†’ WAIT_FOR_SLOT â†’ TASK_ASSIGN â†’ FLOW_END
    â””â†’ REJECTED â†’ LOG_SAVE â†’ ALERT_SAVE â†’ FLOW_END
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… ä»»åŠ¡æ”¶é›†
  - å‘˜å·¥ä»»åŠ¡
  - å‘Šè­¦å¤„ç†ä»»åŠ¡
  - å›è®¿ä»»åŠ¡
  - ç³»ç»Ÿä»»åŠ¡
- âœ… ä¼˜å…ˆçº§è®¡ç®—
  - ç´§æ€¥ç¨‹åº¦ï¼ˆç´§æ€¥/é«˜/ä¸­/ä½ï¼‰
  - ä»»åŠ¡ç±»å‹ï¼ˆäººå·¥/è‡ªåŠ¨/é€šçŸ¥ï¼‰
  - SLAè¦æ±‚
  - ä¸šåŠ¡ä»·å€¼
- âœ… èµ„æºæ£€æŸ¥
  - å·¥ä½œäººå‘˜å¯ç”¨æ€§
  - å·¥ä½œæ—¶é—´æ£€æŸ¥
  - è´Ÿè½½å‡è¡¡
- âœ… æ™ºèƒ½è°ƒåº¦ç®—æ³•
  - è½®è¯¢åˆ†é…
  - æœ€å°‘è´Ÿè½½åˆ†é…
  - ä¼˜å…ˆçº§åˆ†é…
  - æŠ€èƒ½åŒ¹é…åˆ†é…
- âœ… ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
  - ç­‰å¾…é˜Ÿåˆ—
  - æ‰§è¡Œé˜Ÿåˆ—
  - è¶…æ—¶é‡è¯•
  - å¤±è´¥å›æ»š

**è§¦å‘æ–¹å¼**ï¼š
- å®šæ—¶è§¦å‘ï¼ˆé»˜è®¤æ¯1åˆ†é’Ÿï¼‰
- äº‹ä»¶è§¦å‘ï¼ˆä»»åŠ¡åˆ›å»ºæ—¶ï¼‰

**èŠ‚ç‚¹é…ç½®**ï¼š
```json
{
  "taskCollect": {
    "taskTypes": [
      "staff_intervention",
      "alert_processing",
      "follow_up",
      "system_task"
    ],
    "includePending": true,
    "includeProcessing": false
  },
  "priorityCalculate": {
    "rules": [
      {
        "condition": "task.priority === 'urgent'",
        "baseScore": 100,
        "slaWeight": 50
      },
      {
        "condition": "task.priority === 'high'",
        "baseScore": 70,
        "slaWeight": 30
      },
      {
        "condition": "task.priority === 'medium'",
        "baseScore": 50,
        "slaWeight": 20
      },
      {
        "condition": "task.priority === 'low'",
        "baseScore": 30,
        "slaWeight": 10
      }
    ],
    "factors": {
      "urgency": 0.4,
      "sla": 0.3,
      "business_value": 0.2,
      "customer_level": 0.1
    }
  },
  "resourceCheck": {
    "checkWorkingHours": true,
    "checkStaffAvailability": true,
    "loadBalanceStrategy": "least_busy",
    "maxConcurrentTasks": 10
  },
  "scheduleAlgorithm": {
    "strategy": "priority_with_skill_matching",
    "strategies": [
      "round_robin",
      "least_busy",
      "priority_based",
      "skill_matching"
    ],
    "skillMatching": {
      "enabled": true,
      "matchThreshold": 0.7,
      "requiredSkills": ["customer_service", "technical_support"]
    }
  }
}
```

**é¢„è®¡è€—æ—¶**ï¼š1-3ç§’

---

## ğŸ“Š å››ã€ä¼˜åŒ–å‰åå¯¹æ¯”

| å¯¹æ¯”é¡¹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹è¿› |
|-------|-------|-------|------|
| **æµç¨‹æ•°é‡** | 6ä¸ª | 6ä¸ª | âœ… æ•°é‡ä¸å˜ |
| **åŠŸèƒ½è¦†ç›–** | 10/14æ ¸å¿ƒåŠŸèƒ½ | 14/14æ ¸å¿ƒåŠŸèƒ½ | âœ… è¦†ç›–ç‡100% |
| **åœºæ™¯è¦†ç›–** | 6ä¸ªåœºæ™¯ | 10+ä¸ªåœºæ™¯ | âœ… åœºæ™¯æ›´å…¨é¢ |
| **æµç¨‹é›†æˆåº¦** | ä½ï¼ˆæµç¨‹ç‹¬ç«‹ï¼‰ | é«˜ï¼ˆå¤šç›®æ ‡é›†åˆï¼‰ | âœ… é›†æˆåº¦æå‡ |
| **é…ç½®çµæ´»æ€§** | ä¸­ | é«˜ | âœ… çµæ´»æ€§æå‡ |
| **ç³»ç»Ÿç»´æŠ¤æ€§** | ä¸­ | é«˜ | âœ… æ›´æ˜“ç»´æŠ¤ |
| **æ‰©å±•æ€§** | ä¸­ | é«˜ | âœ… æ›´æ˜“æ‰©å±• |

---

## âœ… äº”ã€å®æ–½å»ºè®®

### 5.1 å®æ–½æ­¥éª¤

1. **é˜¶æ®µä¸€ï¼šæ•´åˆç°æœ‰æµç¨‹**ï¼ˆ1-2å¤©ï¼‰
   - åˆå¹¶æ ‡å‡†å®¢æœæµç¨‹å’Œç¾¤ç»„åä½œæµç¨‹ â†’ æ™ºèƒ½å®¢æœæµç¨‹
   - åˆå¹¶é£é™©ç›‘æ§æµç¨‹å’Œå‘Šè­¦å¤„ç†æµç¨‹ â†’ é£é™©ç›‘æ§ä¸å‘Šè­¦æµç¨‹

2. **é˜¶æ®µäºŒï¼šå¢å¼ºç°æœ‰æµç¨‹**ï¼ˆ2-3å¤©ï¼‰
   - å¢å¼ºæ•°æ®åŒæ­¥æµç¨‹ï¼ˆå†²çªè§£å†³ã€å¢é‡åŒæ­¥ï¼‰
   - å¢å¼ºæ»¡æ„åº¦è°ƒæŸ¥æµç¨‹ï¼ˆé—®å·è®¾è®¡ã€è§¦å‘æ—¶æœºï¼‰

3. **é˜¶æ®µä¸‰ï¼šæ–°å¢æµç¨‹**ï¼ˆ2-3å¤©ï¼‰
   - æ–°å¢ç›‘æ§ä¸ç»Ÿè®¡æµç¨‹
   - æ–°å¢æ™ºèƒ½è°ƒåº¦æµç¨‹

4. **é˜¶æ®µå››ï¼šæµ‹è¯•éªŒè¯**ï¼ˆ2-3å¤©ï¼‰
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - å‹åŠ›æµ‹è¯•
   - ç”¨æˆ·éªŒæ”¶æµ‹è¯•

### 5.2 æ³¨æ„äº‹é¡¹

1. **å‘åå…¼å®¹**ï¼šç¡®ä¿ç°æœ‰æ•°æ®å’Œæ–°æµç¨‹å…¼å®¹
2. **ç°åº¦å‘å¸ƒ**ï¼šå…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ï¼Œå†é€æ­¥å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ
3. **ç›‘æ§å‘Šè­¦**ï¼šæ–°å¢æµç¨‹çš„ç›‘æ§å’Œå‘Šè­¦è§„åˆ™
4. **æ–‡æ¡£æ›´æ–°**ï¼šæ›´æ–°æµç¨‹æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
5. **åŸ¹è®­æ”¯æŒ**ï¼šå¯¹è¿ç»´äººå‘˜è¿›è¡ŒåŸ¹è®­

---

## ğŸ¯ å…­ã€æ€»ç»“

ä¼˜åŒ–åçš„6ä¸ªæµç¨‹èƒ½å¤Ÿå®Œæ•´è¦†ç›–ç³»ç»Ÿæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼Œé€šè¿‡å¤šç›®æ ‡é›†åˆçš„æ–¹å¼ï¼Œåœ¨ä¿æŒæµç¨‹æ•°é‡ä¸å˜çš„å‰æä¸‹ï¼Œå®ç°äº†åŠŸèƒ½è¦†ç›–çš„å…¨é¢æ€§å’Œé…ç½®çš„çµæ´»æ€§ã€‚

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
1. âœ… åŠŸèƒ½è¦†ç›–å®Œæ•´ï¼ˆ14/14æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼‰
2. âœ… åœºæ™¯è¦†ç›–å…¨é¢ï¼ˆ10+ä¸ªä¸šåŠ¡åœºæ™¯ï¼‰
3. âœ… é…ç½®çµæ´»ï¼ˆé€šè¿‡èŠ‚ç‚¹é…ç½®å®ç°ä¸åŒä¸šåŠ¡éœ€æ±‚ï¼‰
4. âœ… æ˜“äºç»´æŠ¤ï¼ˆæµç¨‹æ•°é‡é€‚ä¸­ï¼Œç»“æ„æ¸…æ™°ï¼‰
5. âœ… æ˜“äºæ‰©å±•ï¼ˆæ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºæ–°å¢åŠŸèƒ½ï¼‰

**å®æ–½å‘¨æœŸ**ï¼š7-11å¤©

**é¢„æœŸæ•ˆæœ**ï¼š
- ç³»ç»ŸåŠŸèƒ½è¦†ç›–ç‡è¾¾åˆ°100%
- ä¸šåŠ¡åœºæ™¯æ”¯æŒç‡æå‡60%+
- æµç¨‹é…ç½®çµæ´»æ€§æå‡50%+
- ç³»ç»Ÿç»´æŠ¤æˆæœ¬é™ä½30%
