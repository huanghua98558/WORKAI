# AI模块迁移说明

## 📋 变更说明

**变更日期：** 2026-02-05
**变更类型：** 页面迁移

## 🔄 变更内容

### 已迁移
- **旧页面：** `/settings/ai` - AI配置管理（旧版）
- **新页面：** 主页「AI 模块」标签页
- **访问方式：** 直接在主页点击「AI 模块」标签

### 旧页面状态
- **原功能：** 内置模型选择、意图识别配置、服务回复配置、转化配置、记忆功能
- **处理方式：** 创建迁移提示页面，3秒后自动跳转到主页AI模块

## ✨ 新AI模块功能

主页的AI模块提供以下功能：

### 1. AI模型管理
- ✅ 显示6个内置模型
- ✅ 模型启用/禁用
- ✅ 模型健康检查
- ✅ 模型测试

### 2. AI角色管理
- ✅ 创建/编辑/删除AI角色
- ✅ 系统提示词配置
- ✅ 温度和最大token设置

### 3. 话术模板管理
- ✅ 72个预设话术模板
- ✅ 24类场景分类
- ✅ 自定义模板创建

### 4. AI调试
- ✅ 实时测试AI功能
- ✅ 选择模型进行测试
- ✅ 查看测试结果

## 📊 内置模型列表

| 序号 | 模型名称 | 提供商 | 用途 |
|------|----------|--------|------|
| 1 | 豆包Pro 4K（意图识别） | 豆包 | 用户意图识别 |
| 2 | 豆包Pro 32K（服务回复） | 豆包 | 智能回复生成 |
| 3 | DeepSeek V3（转化客服） | DeepSeek | 转化客服场景 |
| 4 | Kimi K2（报告生成） | Kimi | 长文本报告生成 |
| 5 | DeepSeek R1（技术支持） | DeepSeek | 技术支持场景 |
| 6 | 测试模型V3 | 豆包 | 测试专用 |

## 🔧 配置API Key

内置模型已预置，但需要配置提供商的API Key才能使用。

### 配置方式
1. 在AI模块中，点击「API Key 管理」
2. 选择提供商（豆包、DeepSeek、Kimi）
3. 输入API Key和API Endpoint
4. 点击「测试验证」
5. 保存配置

### API端点参考
- **豆包：** `https://ark.cn-beijing.volces.com/api/v3`
- **DeepSeek：** `https://api.deepseek.com`
- **Kimi：** `https://api.moonshot.cn`

## 🎯 使用建议

### 选择合适的模型
| 场景 | 推荐模型 | 理由 |
|------|---------|------|
| 意图识别 | 豆包Pro 4K | 轻量快速，响应速度快 |
| 智能回复 | 豆包Pro 32K | 大上下文，支持长对话 |
| 转化客服 | DeepSeek V3 | 强推理能力 |
| 技术支持 | DeepSeek R1 | 推理能力强 |
| 报告生成 | Kimi K2 | 128K上下文 |

## 📝 注意事项

1. **API Key配置：** 必须先配置提供商的API Key才能使用模型
2. **模型启用：** 可以启用/禁用模型，系统会自动选择已启用的最佳模型
3. **健康检查：** 定期进行健康检查，确保模型可用性
4. **成本控制：** 使用预算管理功能，控制AI调用成本

## 🔍 故障排查

### 问题：看不到6个模型
**解决方案：**
1. 确认已点击主页的「AI 模块」标签
2. 检查网络连接
3. 查看浏览器控制台是否有错误

### 问题：模型无法使用
**解决方案：**
1. 检查是否已配置提供商API Key
2. 进行健康检查测试
3. 查看后端日志（`logs/backend.log`）

### 问题：页面重定向
**说明：**
- 访问 `/settings/ai` 会自动跳转到主页AI模块
- 这是正常的迁移行为

## 📞 技术支持

如有问题，请查看：
- 后端日志：`logs/backend.log`
- 前端控制台：浏览器开发者工具
- API文档：`docs/INTERNAL_MODELS_GUIDE.md`
