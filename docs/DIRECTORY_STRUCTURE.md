# WorkTool AI 2.1 - ç›®å½•ç»“æ„è§„åˆ’ï¼ˆåŸºäºç°æœ‰ç³»ç»Ÿä¼˜åŒ–ç‰ˆï¼‰

## ğŸ“‹ ç›®å½•ç»“æ„æ¦‚è§ˆ

```
worktool-ai/
â”œâ”€â”€ .coze                          # é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ˆCoze CLIï¼‰
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json                   # æ ¹åŒ…é…ç½®
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ tsconfig.json                  # TypeScripté…ç½®
â”œâ”€â”€ next.config.ts                 # Next.jsé…ç½®
â”œâ”€â”€ tailwind.config.ts             # Tailwind CSSé…ç½®
â”œâ”€â”€ docker-compose.yml             # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ .env.example                   # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚
â”œâ”€â”€ docs/                          # ğŸ“„ æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ ARCHITECTURE.md            # ç³»ç»Ÿæ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ DIRECTORY_STRUCTURE.md     # ç›®å½•ç»“æ„æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ REFACTOR_PLAN.md           # ç³»ç»Ÿæ”¹é€ è®¡åˆ’
â”‚   â”œâ”€â”€ API.md                     # APIæ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ DATABASE.md                # æ•°æ®åº“è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ DEPLOYMENT.md              # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ DEVELOPMENT.md             # å¼€å‘æŒ‡å—
â”‚
â”œâ”€â”€ scripts/                       # ğŸ”§ è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ dev.sh                     # å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ build.sh                   # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ start.sh                   # ç”Ÿäº§ç¯å¢ƒå¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ init-db.sh                 # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ migrate-db.sh              # æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚
â”œâ”€â”€ src/                           # ğŸ“¦ æºç ç›®å½•
â”‚   â”‚
â”‚   â”œâ”€â”€ app/                       # ğŸŒ Next.js App Router
â”‚   â”‚   â”œâ”€â”€ layout.tsx             # æ ¹å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ page.tsx               # é¦–é¡µï¼ˆDashboardï¼‰
â”‚   â”‚   â”œâ”€â”€ globals.css            # å…¨å±€æ ·å¼
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/                   # APIè·¯ç”±ï¼ˆåç«¯ï¼‰
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ admin/             # ç®¡ç†ç›¸å…³ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [path]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ logs/[logType]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ message-history/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot-callback-logs/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot-commands/[commandId]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot-commands/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot-groups/[id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot-groups/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot-loadbalancing/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot-monitoring/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot-roles/[id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot-roles/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robots/[robotId]/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ robots/route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ai-io/             # AIè¾“å…¥è¾“å‡ºï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-test-message/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/                # AIç›¸å…³ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ intents/[intentType]/reset/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ intents/[intentType]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ intents/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ test/route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ alerts/            # å‘Šè­¦ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ history/[id]/handle/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ history/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rules/[id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rules/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ stats/route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ collab/            # ååŒï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ decision-logs/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ recommendations/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ staff-activity/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ stats/route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ flow-engine/       # æµç¨‹å¼•æ“ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ definitions/[id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ definitions/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ instances/[id]/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ instances/route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ knowledge/         # çŸ¥è¯†åº“ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ import/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ routes.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ search/route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ monitoring/        # ç›‘æ§ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ai-logs/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-test-message/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ executions/[processingId]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ executions/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ health/route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ notifications/     # é€šçŸ¥ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ methods/[id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ methods/[id]/toggle/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ methods/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ send/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ test/route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ operation-logs/    # æ“ä½œæ—¥å¿—ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ batch-delete/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ by-filters/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ clear-all/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ module-stats/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ stats/route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ prompt-templates/  # Promptæ¨¡æ¿ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/duplicate/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/export/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/toggle/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ check-default/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ import/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ init-default/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ proxy/             # ä»£ç†æœåŠ¡ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ alerts/stats/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ callbacks/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ config/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ execution/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ monitor/summary/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot-commands/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robots/[id]/callback-config/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robots/[id]/callback-url/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robots/[id]/config-callback/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robots/[id]/regenerate-urls/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robots/[id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robots/check-status-all/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robots/check-status/[robotId]/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robots/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robots/test/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ robots/validate/route.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ budget/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ models/[id]/disable/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ models/[id]/enable/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ models/[id]/health/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ models/[id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ models/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ personas/[id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ personas/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ providers/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ templates/[id]/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ templates/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ test/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ usage/route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ protection/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ health/route.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ messages/          # æ¶ˆæ¯APIï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts       # æ¶ˆæ¯åˆ—è¡¨/åˆ›å»º
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts   # æ¶ˆæ¯è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ stream/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ route.ts   # æ¶ˆæ¯å®æ—¶æµï¼ˆSSEï¼‰
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ sessions/          # ä¼šè¯APIï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts       # ä¼šè¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts   # ä¼šè¯è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ messages/
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ route.ts # ä¼šè¯æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stream/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts   # ä¼šè¯å®æ—¶æµï¼ˆSSEï¼‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ active/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ route.ts   # æ´»è·ƒä¼šè¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ staff/             # å·¥ä½œäººå‘˜APIï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts       # å·¥ä½œäººå‘˜åˆ—è¡¨/åˆ›å»º
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts   # å·¥ä½œäººå‘˜è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ sessions/
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ route.ts # å½“å‰ä¼šè¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ workload/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ route.ts   # å·¥ä½œè´Ÿè½½
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ stats/             # ç»Ÿè®¡APIï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚       â”œâ”€â”€ sessions/route.ts     # ä¼šè¯ç»Ÿè®¡
â”‚   â”‚   â”‚       â”œâ”€â”€ messages/route.ts     # æ¶ˆæ¯ç»Ÿè®¡
â”‚   â”‚   â”‚       â”œâ”€â”€ staff/route.ts        # å·¥ä½œäººå‘˜ç»Ÿè®¡
â”‚   â”‚   â”‚       â””â”€â”€ ai/route.ts           # AIç»Ÿè®¡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ alerts/                  # ğŸš¨ å‘Šè­¦ç®¡ç†é¡µé¢ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ center/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx         # å‘Šè­¦ä¸­å¿ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ recipients/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx         # å‘Šè­¦æ¥æ”¶è€…
â”‚   â”‚   â”‚   â”œâ”€â”€ rules/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx         # å‘Šè­¦è§„åˆ™
â”‚   â”‚   â”‚   â””â”€â”€ stats/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx         # å‘Šè­¦ç»Ÿè®¡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ collab-analytics/        # ğŸ¤ ååŒåˆ†æé¡µé¢ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ knowledge-base/          # ğŸ“š çŸ¥è¯†åº“é¡µé¢ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ monitoring/              # âš¡ ç›‘æ§é¡µé¢ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ robot/                   # ğŸ¤– æœºå™¨äººé¡µé¢ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx         # æœºå™¨äººè¯¦æƒ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ settings/                # âš™ï¸ è®¾ç½®ä¸­å¿ƒé¡µé¢ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx         # AIè®¾ç½®
â”‚   â”‚   â”‚   â””â”€â”€ notifications/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx         # é€šçŸ¥è®¾ç½®
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ flows/                   # ğŸ¨ æµç¨‹ç¼–è¾‘å™¨é¡µé¢ï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx           # æµç¨‹ç¼–è¾‘å™¨å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx             # æµç¨‹åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ [flowId]/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx         # æµç¨‹ç¼–è¾‘å™¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx     # æµç¨‹è®¾ç½®
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚       â”œâ”€â”€ FlowList.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ FlowCanvas.tsx
â”‚   â”‚   â”‚       â””â”€â”€ FlowSettings.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ sessions/                # ğŸ’¬ ä¼šè¯åˆ†æé¡µé¢ï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx           # ä¼šè¯åˆ†æå¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx             # ä¼šè¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ [sessionId]/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx         # ä¼šè¯è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ SessionHeader.tsx
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ MessageList.tsx
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Satisfaction.tsx
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚       â”œâ”€â”€ SessionList.tsx
â”‚   â”‚   â”‚       â””â”€â”€ SessionFilters.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ staff/                   # ğŸ‘¥ å·¥ä½œäººå‘˜ç®¡ç†é¡µé¢ï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx           # å·¥ä½œäººå‘˜ç®¡ç†å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx             # å·¥ä½œäººå‘˜åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ [staffId]/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx         # å·¥ä½œäººå‘˜è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx     # å·¥ä½œäººå‘˜è®¾ç½®
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚       â”œâ”€â”€ StaffList.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ StaffCard.tsx
â”‚   â”‚   â”‚       â””â”€â”€ StaffWorkload.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ reports/                 # ğŸ“ˆ æ•°æ®æŠ¥è¡¨é¡µé¢ï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx           # æ•°æ®æŠ¥è¡¨å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx             # æŠ¥è¡¨åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ [reportId]/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx         # æŠ¥è¡¨è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ generate/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx         # ç”ŸæˆæŠ¥è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚       â”œâ”€â”€ ReportList.tsx
â”‚   â”‚   â”‚       â””â”€â”€ ReportChart.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ callback-debug/          # å›è°ƒè°ƒè¯•é¡µé¢ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ test-monitor-*/          # æµ‹è¯•ç›‘æ§é¡µé¢ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚       â”œâ”€â”€ direct/page.tsx
â”‚   â”‚       â”œâ”€â”€ metrics/page.tsx
â”‚   â”‚       â””â”€â”€ simple/page.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                 # ğŸ§© å…±äº«ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/                    # shadcn/uiç»„ä»¶ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ layouts/                # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ charts/                 # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ data-display/           # æ•°æ®å±•ç¤ºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ forms/                  # è¡¨å•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ feedback/               # åé¦ˆç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ notifications/          # é€šçŸ¥ç»„ä»¶ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ ai-module/              # AIæ¨¡å—ç»„ä»¶ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ robot/                  # æœºå™¨äººç»„ä»¶ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ alert-config-tab/       # å‘Šè­¦é…ç½®ç»„ä»¶ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ enhanced-alert-management/ # å¢å¼ºå‘Šè­¦ç®¡ç†ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ monitoring/             # ç›‘æ§ç»„ä»¶ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ flow-engine-manage/     # æµç¨‹å¼•æ“ç»„ä»¶ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â””â”€â”€ providers/              # Context Providers
â”‚   â”‚
â”‚   â”œâ”€â”€ storage/                    # ğŸ’¾ å­˜å‚¨ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ schema.ts       # Drizzle Schemaï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ new-schemas/        # æ–°å¢Schema â­
â”‚   â”‚   â”‚       â”œâ”€â”€ messages.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ sessions.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ robots.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ staff.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ intents.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ collaborations.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ satisfaction.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ flow-definitions.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ flow-executions.ts
â”‚   â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ s3/                     # S3å­˜å‚¨
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                        # ğŸ”§ å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ api/                    # APIå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ ai-io.ts            # AI IOï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.ts            # ç®¡ç†APIï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ alerts.ts           # å‘Šè­¦APIï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ collab.ts           # ååŒAPIï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ flow-engine.ts      # æµç¨‹å¼•æ“APIï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ knowledge.ts        # çŸ¥è¯†åº“APIï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ monitoring.ts       # ç›‘æ§APIï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ notifications.ts    # é€šçŸ¥APIï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ prompt-templates.ts # Promptæ¨¡æ¿APIï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ messages.ts         # æ¶ˆæ¯APIï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â”œâ”€â”€ sessions.ts         # ä¼šè¯APIï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â”œâ”€â”€ staff.ts            # å·¥ä½œäººå‘˜APIï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â””â”€â”€ stats.ts            # ç»Ÿè®¡APIï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ db/                     # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts            # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â””â”€â”€ queries/            # æ•°æ®åº“æŸ¥è¯¢
â”‚   â”‚   â”‚       â”œâ”€â”€ messages.ts     # æ–°å¢ â­
â”‚   â”‚   â”‚       â”œâ”€â”€ sessions.ts     # æ–°å¢ â­
â”‚   â”‚   â”‚       â”œâ”€â”€ robots.ts       # æ–°å¢ â­
â”‚   â”‚   â”‚       â””â”€â”€ staff.ts        # æ–°å¢ â­
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ redis/                  # Redisé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ cache.ts
â”‚   â”‚   â”‚   â””â”€â”€ queue.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ai/                     # AIæœåŠ¡ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ AIServiceFactory.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ base/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AIService.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AIContext.ts
â”‚   â”‚   â”‚   â””â”€â”€ providers/
â”‚   â”‚   â”‚       â”œâ”€â”€ DoubaoProvider.ts
â”‚   â”‚   â”‚       â””â”€â”€ OpenAIProvider.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/               # ä¸šåŠ¡æœåŠ¡ï¼ˆæ–°å¢ï¼‰â­
â”‚   â”‚   â”‚   â”œâ”€â”€ message-service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ session-service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ sender-identification.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ intervention-judgment.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ satisfaction-inference.ts
â”‚   â”‚   â”‚   â””â”€â”€ collaborative-decision.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ hooks/                  # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ types/                  # TypeScriptç±»å‹
â”‚   â”‚   â””â”€â”€ constants/              # å¸¸é‡
â”‚   â”‚
â”‚   â””â”€â”€ styles/                     # ğŸ¨ æ ·å¼æ–‡ä»¶
â”‚       â”œâ”€â”€ globals.css
â”‚       â””â”€â”€ components.css
â”‚
â””â”€â”€ server/                         # ğŸ–¥ï¸ æœåŠ¡å™¨ç«¯ä»£ç 
    â”‚
    â””â”€â”€ services/                   # AIæœåŠ¡ï¼ˆå·²æœ‰ï¼‰
        â”œâ”€â”€ ai/
        â”‚   â”œâ”€â”€ AIServiceFactory.ts
        â”‚   â”œâ”€â”€ base/
        â”‚   â”‚   â”œâ”€â”€ AIService.ts
        â”‚   â”‚   â””â”€â”€ AIContext.ts
        â”‚   â””â”€â”€ providers/
        â”‚       â”œâ”€â”€ DoubaoProvider.ts
        â”‚       â””â”€â”€ OpenAIProvider.ts
```

---

## ğŸ“ ç›®å½•ç»“æ„è¯´æ˜

### ç°æœ‰ç»“æ„ï¼ˆä¿ç•™ï¼‰

- âœ… `/docs/` - æ–‡æ¡£ç›®å½•
- âœ… `/scripts/` - è„šæœ¬ç›®å½•
- âœ… `/src/app/` - Next.jsåº”ç”¨
- âœ… `/src/components/` - Reactç»„ä»¶
- âœ… `/src/storage/` - æ•°æ®åº“Schema
- âœ… `/src/lib/` - å·¥å…·åº“
- âœ… `/server/services/` - AIæœåŠ¡

### æ–°å¢ç»“æ„ï¼ˆæ ‡æ³¨ â­ï¼‰

#### APIè·¯ç”±æ–°å¢
- `/api/messages/` - æ¶ˆæ¯API
- `/api/sessions/` - ä¼šè¯API
- `/api/staff/` - å·¥ä½œäººå‘˜API
- `/api/stats/` - ç»Ÿè®¡API

#### å‰ç«¯é¡µé¢æ–°å¢
- `/flows/` - æµç¨‹ç¼–è¾‘å™¨
- `/sessions/` - ä¼šè¯åˆ†æ
- `/staff/` - å·¥ä½œäººå‘˜ç®¡ç†
- `/reports/` - æ•°æ®æŠ¥è¡¨

#### æ•°æ®åº“Schemaæ–°å¢
- `/storage/database/new-schemas/` - æ–°å¢è¡¨ç»“æ„
  - messages.ts
  - sessions.ts
  - robots.ts
  - staff.ts
  - intents.ts
  - collaborations.ts
  - satisfaction.ts
  - flow-definitions.ts
  - flow-executions.ts

#### APIå®¢æˆ·ç«¯æ–°å¢
- `/lib/api/messages.ts`
- `/lib/api/sessions.ts`
- `/lib/api/staff.ts`
- `/lib/api/stats.ts`

#### ä¸šåŠ¡æœåŠ¡æ–°å¢
- `/lib/services/` - æ ¸å¿ƒä¸šåŠ¡æœåŠ¡

---

## ğŸ¯ å¼€å‘è§„èŒƒ

### å‘½åè§„èŒƒ

#### æ–‡ä»¶å‘½å
- Reactç»„ä»¶ï¼š`PascalCase.tsx`
- å·¥å…·å‡½æ•°ï¼š`camelCase.ts`
- APIè·¯ç”±ï¼š`route.ts`ï¼ˆNext.jsçº¦å®šï¼‰
- æœåŠ¡æ–‡ä»¶ï¼š`xxx.service.ts`
- ä»“åº“æ–‡ä»¶ï¼š`xxx.repository.ts`

#### å˜é‡å‘½å
- å¸¸é‡ï¼š`UPPER_SNAKE_CASE`
- å˜é‡ï¼š`camelCase`
- ç±»å‹/æ¥å£ï¼š`PascalCase`
- æšä¸¾ï¼š`PascalCase`

### ç›®å½•ç»„ç»‡åŸåˆ™

1. **ä¿æŒç°æœ‰ç»“æ„**ï¼šä¸ä¿®æ”¹å·²å­˜åœ¨çš„ç›®å½•
2. **æ–°å¢å†…å®¹æŒ‰åŠŸèƒ½ç»„ç»‡**ï¼šç›¸å…³åŠŸèƒ½æ”¾åœ¨åŒä¸€ç›®å½•
3. **æ¸…æ™°çš„æ–°æ—§åˆ†ç¦»**ï¼šæ–°å¢å†…å®¹ç”¨ â­ æ ‡æ³¨
4. **æ¸è¿›å¼æ•´åˆ**ï¼šæ–°åŠŸèƒ½ä¸ç°æœ‰åŠŸèƒ½æ•´åˆ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨æœåŠ¡ï¼ˆå‰ç«¯+åç«¯ï¼‰
pnpm dev
```

### æ•°æ®åº“è¿ç§»

```bash
# åˆå§‹åŒ–æ–°è¡¨
pnpm db:push

# æˆ–ä½¿ç”¨è¿ç§»
pnpm db:migrate
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä¿ç•™ç°æœ‰åŠŸèƒ½**ï¼šä¸åˆ é™¤æˆ–ä¿®æ”¹ç°æœ‰ä»£ç ï¼Œåªæ–°å¢
2. **æ¸è¿›å¼æ”¹é€ **ï¼šæŒ‰è®¡åˆ’é€æ­¥å®ç°ï¼Œé¿å…å¤§æ”¹åŠ¨
3. **æµ‹è¯•å…ˆè¡Œ**ï¼šæ¯æ¬¡æ”¹åŠ¨åå……åˆ†æµ‹è¯•
4. **æ–‡æ¡£åŒæ­¥**ï¼šä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0ï¼ˆåŸºäºç°æœ‰ç³»ç»Ÿä¼˜åŒ–ç‰ˆï¼‰
**æœ€åæ›´æ–°**: 2025-01-09
**ç»´æŠ¤è€…**: WorkTool AI Team
